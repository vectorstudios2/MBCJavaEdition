(function(){'use strict';const da=["DEBUG","INFO","WARN","ERROR"];var ha="main",ia=null;function ja(a,b,c){if(!(1>a)){var d="EagRuntimeJS: ["+(new Date).toLocaleTimeString()+"]["+ha+"/"+(da[a]||"UNKNOWN")+"] ";a:{if(0<c.length){for(var g=[],m=0;m<c.length;++m){var t=b.indexOf("{}");if(-1!=t)g.push(b.substring(0,t)),g.push(c[m]),b=b.substring(t+2);else break}if(0<g.length){g.push(b);c=g.join("");break a}}c=b}b=d+c;3<=a?console.error(b):console.log(b);ia&&ia(b,3<=a)}}function e(a,...b){ja(1,a,b)}
function la(a,...b){ja(2,a,b)}function f(a,...b){ja(3,a,b)}function ma(a,b){if(b){if(b.message?ja(3,'{}: {} - "{}"',[a,b.name,b.message]):ja(3,"{}: {}",[a,b.name]),"string"===typeof b.stack)for(b=oa(b.stack),a=0;a<b.length;++a)ja(3,"    at "+b[a],[])}else ja(3,"{}: <null>",[a])}function pa(a){return function(){f("Unsupported function called: {}.{}",a);return 0}}function C(a,b){a[b]=pa(b)}function ra(a){return new Promise(function(b){setTimeout(b,a)})}
class sa{constructor(){this.G=this.o=null;this.u=0}K(){return this.u}push(a){this.G&&(this.G._next=a);this.G=a;this.o||(this.o=a);++this.u}j(){if(this.o){const a=this.o;(this.o=a._next||null)?a._next=null:this.G=null;--this.u;return a}return null}};var ta={},H={},wa={},ya={},za={},I={},Aa={},J={},Da={},Ea={},Fa={},N={},Ga={},Ja={},Ka={},La=null,Ma=null,Na=null,Oa=null,Pa=null,Qa=null,Ra=null,Sa=null,O=null,Ta=null,Va=null,P=null,R=null,Wa=null,Xa=!1,Ya=0,V=null,Za=null,$a=null,ab=null,bb=null,cb=null,db=null,gb=null,hb=null,ib=!1,jb=null,kb=null,lb=!1;const mb=[];var nb=null,ob=null,pb=null,qb=null,Lb="_eaglercraftX",Mb=!1,Nb=!1,Ob=!1,Pb=!0,Qb=!1,Rb=!1,Sb=!0,Tb=!0,Ub=!1;
function Vb(){"string"===typeof O.localStorageNamespace&&(Lb=O.localStorageNamespace);"boolean"===typeof O.openDebugConsoleOnLaunch&&(Mb=O.openDebugConsoleOnLaunch);"boolean"===typeof O.fixDebugConsoleUnloadListener&&(Nb=O.fixDebugConsoleUnloadListener);"boolean"===typeof O.forceWebViewSupport&&(Ob=O.forceWebViewSupport);"boolean"===typeof O.enableWebViewCSP&&(Pb=O.enableWebViewCSP);"boolean"===typeof O.forceWebGL1&&(Qb=O.forceWebGL1);"boolean"===typeof O.forceWebGL2&&(Rb=O.forceWebGL2);"boolean"===
typeof O.allowExperimentalWebGL1&&(Sb=O.allowExperimentalWebGL1);"boolean"===typeof O.useWebGLExt&&(Tb=O.useWebGLExt);"boolean"===typeof O.useDelayOnSwap&&(Ub=O.useDelayOnSwap)}
async function Wb(){function a(){try{g=new AudioContext}catch(t){ma("Could not initialize audio context",t)}}Vb();ia=Xb;"yes"!==window.__isEaglerX188UnloadListenerSet&&(window.onbeforeunload=function(){window.__curEaglerX188UnloadListenerCB&&window.__curEaglerX188UnloadListenerCB();return!1},window.__isEaglerX188UnloadListenerSet="yes");e("Initializing EagRuntime JS context...");await Yb();Zb();$b();ac();bc();cc();dc();C(Ka,"sendPacket");C(Ka,"getAvailablePackets");C(Ka,"getNextPacket");C(Ka,"setCrashCallback");
C(Ka,"isTabAboutToClose");Va.classList.add("_eaglercraftX_root_element");Va.style.overflow="hidden";for(var b=null,c;c=Va.lastChild;)b||=c,Va.removeChild(c);P=document.createElement("div");P.classList.add("_eaglercraftX_wrapper_element");P.style.position="relative";P.style.width="100%";P.style.height="100%";P.style.overflow="hidden";P.style.backgroundColor="black";Va.appendChild(P);b&&(b.style.position="absolute",b.style.top="0px",b.style.left="0px",b.style.right="0px",b.style.bottom="0px",b.style.zIndex=
"2",b.classList.add("_eaglercraftX_early_splash_element"),P.appendChild(b));await ra(10);c=window.devicePixelRatio;b=c*P.clientWidth|0;c=c*P.clientHeight|0;e("Initializing audio context");if("function"===typeof document.exitPointerLock){var d=navigator.userAgent;null!==d?(d=d.toLowerCase(),ib=-1!==d.indexOf("mobi")||-1!==d.indexOf("tablet")):ib=!1}else ib=!0;var g=null;!ib&&navigator.userActivation&&navigator.userActivation.hasBeenActive?a():(d=document.createElement("div"),d.classList.add("_eaglercraftX_press_any_key_image"),
d.style.position="absolute",d.style.top="0px",d.style.left="0px",d.style.right="0px",d.style.bottom="0px",d.style.width="100%",d.style.height="100%",d.style.zIndex="3",d.style.touchAction="pan-x pan-y",d.style.background='center / contain no-repeat url("'+Qa+'"), left / 1000000% 100% no-repeat url("'+Qa+'") white',d.style.setProperty("image-rendering","pixelated"),P.appendChild(d),await new Promise(function(t,D){function y(){if(!z){z=!0;ib?P.removeChild(B):(window.removeEventListener("keydown",y),
P.removeEventListener("mousedown",y),P.removeEventListener("touchstart",y));try{a()}catch(G){D(G);return}t()}}var z=!1;if(ib){var B=document.createElement("div");B.classList.add("_eaglercraftX_mobile_press_any_key");B.setAttribute("style","position:absolute;background-color:white;font-family:sans-serif;top:10%;left:10%;right:10%;bottom:10%;border:5px double black;padding:calc(5px + 7vh) 15px;text-align:center;font-size:20px;user-select:none;z-index:10;");B.innerHTML='<h3 style="margin-block-start:0px;margin-block-end:0px;margin:20px 5px;">Mobile Browser Detected</h3><p style="margin-block-start:0px;margin-block-end:0px;margin:20px 5px;">Warning: EaglercraftX WASM-GC requires a lot of memory and may not be stable on most mobile devices!</p><p style="margin-block-start:0px;margin-block-end:0px;margin:20px 2px;"><button style="font: 24px sans-serif;font-weight:bold;" class="_eaglercraftX_mobile_launch_client">Launch EaglercraftX</button></p><p style="margin-block-start:0px;margin-block-end:0px;margin:25px 5px;">(Tablets and phones with large screens work best)</p>';
B.querySelector("._eaglercraftX_mobile_launch_client").addEventListener("click",y);P.appendChild(B)}else window.addEventListener("keydown",y),P.addEventListener("mousedown",y),P.addEventListener("touchstart",y)}),P.removeChild(d));g?ec(g):fc();e("Creating main canvas");R=document.createElement("canvas");R.classList.add("_eaglercraftX_canvas_element");R.style.width="100%";R.style.height="100%";R.style.zIndex="1";R.style.touchAction="pan-x pan-y";R.style.setProperty("-webkit-touch-callout","none");
R.style.setProperty("-webkit-tap-highlight-color","rgba(255, 255, 255, 0)");R.style.setProperty("image-rendering","pixelated");R.width=b;R.height=c;P.appendChild(R);await gc();e("Creating WebGL context");P.addEventListener("webglcontextcreationerror",function(t){f("[WebGL Error]: {}",t.statusMessage)});b={antialias:!1,depth:!1,powerPreference:"high-performance",desynchronized:!0,preserveDrawingBuffer:!1,premultipliedAlpha:!1,alpha:!1};d=!1;if(Rb){e("Note: Forcing WebGL 2.0 context");c=300;var m=R.getContext("webgl2",
b);if(!m)return hc("WebGL 2.0 is not supported on this device!"),!1}else if(Qb){if(e("Note: Forcing WebGL 1.0 context"),c=200,m=R.getContext("webgl",b),!m)if(Sb){if(d=!0,m=R.getContext("experimental-webgl",b),!m)return hc("WebGL is not supported on this device!"),!1}else return hc("WebGL is not supported on this device!"),!1}else if(c=300,m=R.getContext("webgl2",b),!m&&(c=200,m=R.getContext("webgl",b),!m))if(Sb){if(d=!0,m=R.getContext("experimental-webgl",b),!m)return hc("WebGL is not supported on this device!"),
!1}else return hc("WebGL is not supported on this device!"),!1;d&&alert('WARNING: Detected "experimental" WebGL 1.0 support, certain graphics API features may be missing, and therefore EaglercraftX may malfunction and crash!');Ya=c;Wa=m;Xa=d;ic(m,c);e("OpenGL Version: {}",J.glGetString(7938));e("OpenGL Renderer: {}",J.glGetString(7937));b=J.dumpActiveExtensions();if(0===b.length)e("Unlocked the following OpenGL ES extensions: (NONE)");else for(b.sort(),e("Unlocked the following OpenGL ES extensions:"),
c=0;c<b.length;++c)e(" - {}",b[c]);J.glClearColor(0,0,0,1);J.glClear(16384);await ra(20);e("EagRuntime JS context initialization complete");return!0}
async function jc(){Vb();ia=function(a,b){postMessage({ch:"~!LOGGER",txt:a,err:b})};e("Initializing EagRuntime worker JS context...");await Yb();C(H,"setClipboard");C(H,"getClipboard");C(H,"displayFileChooser");C(H,"fileChooserHasResult");C(H,"getFileChooserResult");C(H,"clearFileChooserResult");C(H,"downloadFileWithNameU8");C(H,"downloadFileWithNameA");C(H,"downloadScreenshot");C(H,"showDebugConsole");C(H,"addLogMessage");C(H,"isShowingDebugConsole");C(H,"getFaviconURL");C(H,"setResetSettingsCallback");
fc();C(I,"keyboardLayoutSupported");C(I,"iterateKeyboardLayout");C(I,"updateCanvasSize");C(I,"updatePlatformAndSleep");C(I,"isVSyncSupported");C(I,"mouseSetGrabbed");C(I,"isMouseGrabSupported");C(I,"isMouseGrabbed");C(I,"isPointerLocked");C(I,"supportsFullscreen");C(I,"toggleFullscreen");C(I,"isFullscreen");C(I,"touchSetOpenKeyboardZone");C(I,"touchCloseDeviceKeyboard");C(I,"touchIsDeviceKeyboardOpenMAYBE");C(I,"gamepadSupported");C(I,"isVisualViewport");C(J,"getCapBits");C(J,"glEnable");C(J,"glDisable");
C(J,"glClearColor");C(J,"glClearDepth");C(J,"glClear");C(J,"glDepthFunc");C(J,"glDepthMask");C(J,"glCullFace");C(J,"glViewport");C(J,"glBlendFunc");C(J,"glBlendFuncSeparate");C(J,"glBlendEquation");C(J,"glBlendColor");C(J,"glColorMask");C(J,"glDrawBuffers");C(J,"glReadBuffer");C(J,"glReadPixels");C(J,"glPolygonOffset");C(J,"glLineWidth");C(J,"glGenBuffers");C(J,"glGenTextures");C(J,"glCreateProgram");C(J,"glCreateShader");C(J,"glCreateFramebuffer");C(J,"glCreateRenderbuffer");C(J,"glGenQueries");
C(J,"glDeleteBuffers");C(J,"glDeleteTextures");C(J,"glDeleteProgram");C(J,"glDeleteShader");C(J,"glDeleteFramebuffer");C(J,"glDeleteRenderbuffer");C(J,"glDeleteQueries");C(J,"glBindBuffer");C(J,"glBufferData");C(J,"glBufferSubData");C(J,"glEnableVertexAttribArray");C(J,"glDisableVertexAttribArray");C(J,"glVertexAttribPointer");C(J,"glActiveTexture");C(J,"glBindTexture");C(J,"glTexParameterf");C(J,"glTexParameteri");C(J,"glTexImage3D");C(J,"glTexImage2D");C(J,"glTexSubImage2D");C(J,"glCopyTexSubImage2D");
C(J,"glTexStorage2D");C(J,"glPixelStorei");C(J,"glGenerateMipmap");C(J,"glShaderSource");C(J,"glCompileShader");C(J,"glGetShaderi");C(J,"glGetShaderInfoLog");C(J,"glUseProgram");C(J,"glAttachShader");C(J,"glDetachShader");C(J,"glLinkProgram");C(J,"glGetProgrami");C(J,"glGetProgramInfoLog");C(J,"glDrawArrays");C(J,"glDrawElements");C(J,"glDrawRangeElements");C(J,"glBindAttribLocation");C(J,"glGetAttribLocation");C(J,"glGetUniformLocation");C(J,"glGetUniformBlockIndex");C(J,"glBindBufferRange");C(J,
"glUniformBlockBinding");C(J,"glUniform1f");C(J,"glUniform2f");C(J,"glUniform3f");C(J,"glUniform4f");C(J,"glUniform1i");C(J,"glUniform2i");C(J,"glUniform3i");C(J,"glUniform4i");C(J,"glUniformMatrix2fv");C(J,"glUniformMatrix3fv");C(J,"glUniformMatrix4fv");C(J,"glUniformMatrix3x2fv");C(J,"glUniformMatrix4x2fv");C(J,"glUniformMatrix4x3fv");C(J,"glBindFramebuffer");C(J,"glCheckFramebufferStatus");C(J,"glBlitFramebuffer");C(J,"glRenderbufferStorage");C(J,"glFramebufferTexture2D");C(J,"glFramebufferTextureLayer");
C(J,"glBindRenderbuffer");C(J,"glFramebufferRenderbuffer");C(J,"glGetInteger");C(J,"glGetError");C(J,"getAllExtensions");C(J,"dumpActiveExtensions");C(J,"glGetString");C(J,"glGenVertexArrays");C(J,"glDeleteVertexArrays");C(J,"glBindVertexArray");C(J,"glVertexAttribDivisor");C(J,"glDrawArraysInstanced");C(J,"glDrawElementsInstanced");C(J,"isContextLost");C(Ea,"getMic");C(Ea,"setDataAvailableHandler");C(Fa,"isSupported");C(Fa,"createRTCPeerConnection");C(N,"supported");C(N,"clientLANReadyState");C(N,
"clientLANCloseConnection");C(N,"clientLANSendPacket");C(N,"clientLANReadPacket");C(N,"clientLANAvailable");C(N,"clientLANSetICEServersAndConnect");C(N,"clearLANClientState");C(N,"clientLANAwaitICECandidate");C(N,"clientLANAwaitDescription");C(N,"clientLANAwaitChannel");C(N,"clientLANClosed");C(N,"clientLANSetICECandidate");C(N,"clientLANSetDescription");C(N,"clientLANClosed");C(N,"serverLANInitializeServer");C(N,"serverLANCloseServer");C(N,"serverLANCreatePeer");C(Ga,"checkSupported");C(Ga,"checkCSPSupported");
C(Ga,"sendStringMessage");C(Ga,"sendBinaryMessage");C(Ga,"beginShowing");C(Ga,"resize");C(Ga,"endShowing");C(Ja,"startIntegratedServer");C(Ja,"sendPacket");C(Ja,"getAvailablePackets");C(Ja,"getNextPacket");C(Ja,"killWorker");C(Ja,"showCrashReportOverlay");C(Ja,"hideCrashReportOverlay");kc();e("EagRuntime worker JS context initialization complete")}
function lc(a){V=a.buffer;e("WebAssembly direct memory resized to {} MiB",.01*(V.byteLength/1024/10.24|0));Za=new Uint8Array(V);$a=new Int8Array(V);ab=new Uint16Array(V);bb=new Int16Array(V);db=new Uint32Array(V);cb=new Int32Array(V);gb=new Float32Array(V);mc()}function mc(){hb&&hb($a,Za,bb,ab,cb,db,gb)}const nc=new sa;function Z(a,b,c){nc.push({eventType:a<<5|b,eventObj:c,_next:null})}let oc=/.+:wasm-function\[[0-9]+]:0x([0-9a-f]+).*/;
function oa(a){if(!a)return null;const b=[];for(let c of a.split("\n")){if(Oa&&(a=oc.exec(c),null!==a&&2<=a.length&&(a=parseInt(a[1],16),!isNaN(a))))try{const d=Oa([a]);if(0<d.length){for(let g of d)b.push(""+g.className+"."+g.method+"("+g.file+":"+g.line+")");continue}}catch(d){}c=c.trim();c.startsWith("at ")&&(c=c.substring(3));b.push(c)}return b}
function pc(){var a=document.createElement("button");a.setAttribute("style","margin-left:10px;");a.innerText="Reset Settings";a.addEventListener("click",function(){pb?pb():window.alert("Local storage has not been initialized yet")});const b=document.createElement("button");b.setAttribute("style","margin-left:10px;");b.innerText="Open Debug Console";b.addEventListener("click",function(){ob?ob():window.alert("Debug console has not been initialized yet")});var c=document.createElement("div");c.setAttribute("style",
"position:absolute;bottom:5px;right:0px;");c.appendChild(a);c.appendChild(b);a=document.createElement("div");a.setAttribute("style","position:relative;");a.appendChild(c);c=document.createElement("div");c.classList.add("_eaglercraftX_crash_tools_element");c.setAttribute("style","z-index:101;position:absolute;top:135px;left:10%;right:10%;height:0px;");c.appendChild(a);return c}
function qc(a){const b=a?oa(a.stack):null;a="Native Browser Exception\n----------------------------------\n  Line: "+(a&&"string"===typeof a.fileName?a.fileName:"unknown")+":"+(a&&"number"===typeof a.lineNumber?a.lineNumber:"unknown")+":"+(a&&"number"===typeof a.columnNumber?a.columnNumber:"unknown")+"\n  Type: "+(a&&"string"===typeof a.name?a.name:"unknown")+"\n  Desc: "+(a&&"string"===typeof a.message?a.message:"null")+"\n----------------------------------\n\nDeobfuscated stack trace:\n    at "+
(b?b.join("\n    at "):"null")+"\n\nThis exception was not handled by the WASM binary\n";if("undefined"!==typeof window)rc(a,!0);else if(sc){f("\n{}",a);try{sc(a,!0)}catch(c){console.log(c)}}else f("\n{}",a)}
function rc(a,b){f("Game crashed!");var c="Game Crashed! I have fallen and I can't get up!\n\n"+a+"\n\n",d='eaglercraft.version = "'+mb[0]+'"\neaglercraft.minecraft = "'+mb[2]+'"\neaglercraft.brand = "'+mb[1]+'"\n\n'+tc()+"\nwindow.eaglercraftXOpts = "+JSON.stringify(O)+"\n\ncurrentTime = "+(new Date).toLocaleString()+"\n\n"+uc("userAgent")+uc("vendor")+uc("language")+uc("hardwareConcurrency")+uc("deviceMemory")+uc("platform")+uc("product")+vc()+"\n"+wc("localStorage")+wc("sessionStorage")+wc("indexedDB")+
"\nrootElement.clientWidth = "+(P?P.clientWidth:"undefined")+"\nrootElement.clientHeight = "+(P?P.clientHeight:"undefined")+"\n"+wc("innerWidth")+wc("innerHeight")+wc("outerWidth")+wc("outerHeight")+wc("devicePixelRatio")+xc("availWidth")+xc("availHeight")+xc("colorDepth")+xc("pixelDepth")+"\n"+yc()+"\n",g=c+d;const m=[];try{"object"===typeof O&&"object"===typeof O.hooks&&"function"===typeof O.hooks.crashReportShow&&O.hooks.crashReportShow(g,function(t){m.push(t)})}catch(t){ma("Uncaught exception invoking crash report hook",
t)}if(lb){f("");f("An additional crash report was supressed:");g=a.split(/[\r\n]+/);for(a=0;a<g.length;++a)f("  {}",g[a]);if(0<m.length)for(a=0;a<m.length;++a)if(g=m[a]){f("");f("  ----------[ CRASH HOOK ]----------");g=g.split(/[\r\n]+/);for(a=0;a<g.length;++a)f("  {}",g[a]);f("  ----------------------------------")}}else{lb=!0;if(0<m.length){g=c+"Got the following messages from the crash report hook registered in eaglercraftXOpts:\n\n";for(a=0;a<m.length;++a)g+="----------[ CRASH HOOK ]----------\n"+
m[a]+"\n----------------------------------\n\n";g+=d}(d=P||Va)?(b&&f("\n{}",g),b=document.createElement("img"),a=document.createElement("div"),b.setAttribute("style","z-index:100;position:absolute;top:10px;left:calc(50% - 151px);"),b.src=Ra,a.setAttribute("style","z-index:100;position:absolute;top:135px;left:10%;right:10%;bottom:50px;background-color:white;border:1px solid #cccccc;overflow-x:hidden;overflow-y:scroll;overflow-wrap:break-word;white-space:pre-wrap;font: 14px monospace;padding:10px;"),
a.classList.add("_eaglercraftX_crash_element"),d.appendChild(b),d.appendChild(a),d.appendChild(pc()),a.appendChild(document.createTextNode(g)),nb&&nb(),window.__curEaglerX188UnloadListenerCB=null):(alert("Root element not found, crash report was printed to console"),f("\n{}",g))}}
function hc(a){if(!lb){lb=!0;var b=P||Va;f("Compatibility error: {}",a);if(b){var c=document.createElement("img"),d=document.createElement("div");c.setAttribute("style","z-index:100;position:absolute;top:10px;left:calc(50% - 151px);");c.src=Ra;d.setAttribute("style","z-index:100;position:absolute;top:135px;left:10%;right:10%;bottom:50px;background-color:white;border:1px solid #cccccc;overflow-x:hidden;overflow-y:scroll;font:18px sans-serif;padding:40px;");d.classList.add("_eaglercraftX_incompatible_element");
b.appendChild(c);b.appendChild(d);b.appendChild(pc());d.innerHTML='<h2><svg style="vertical-align:middle;margin:0px 16px 8px 8px;" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none"><path stroke="#000000" stroke-width="3" stroke-linecap="square" d="M1.5 8.5v34h45v-28m-3-3h-10v-3m-3-3h-10m15 6h-18v-3m-3-3h-10"/><path stroke="#000000" stroke-width="2" stroke-linecap="square" d="M12 21h0m0 4h0m4 0h0m0-4h0m-2 2h0m20-2h0m0 4h0m4 0h0m0-4h0m-2 2h0"/><path stroke="#000000" stroke-width="2" stroke-linecap="square" d="M20 30h0 m2 2h0 m2 2h0 m2 2h0 m2 -2h0 m2 -2h0 m2 -2h0"/></svg>+ This device is incompatible with Eaglercraft&ensp;:(</h2><div style="margin-left:40px;"><p style="font-size:1.2em;"><b style="font-size:1.1em;">Issue:</b> <span style="color:#BB0000;" id="_eaglercraftX_crashReason"></span><br /></p><p style="margin-left:10px;font:0.9em monospace;" id="_eaglercraftX_crashUserAgent"></p><p style="margin-left:10px;font:0.9em monospace;" id="_eaglercraftX_crashWebGL"></p><p style="margin-left:10px;font:0.9em monospace;">Current Date: '+
(new Date).toLocaleString()+'</p><p><br /><span style="font-size:1.1em;border-bottom:1px dashed #AAAAAA;padding-bottom:5px;">Things you can try:</span></p><ol><li><span style="font-weight:bold;">Just try using Eaglercraft on a different device</span>, it isn\'t a bug it\'s common sense</li><li style="margin-top:7px;">If this screen just appeared randomly, try restarting your browser or device</li><li style="margin-top:7px;">If you are not using Chrome/Edge, try installing the latest Google Chrome</li><li style="margin-top:7px;">If your browser is out of date, please update it to the latest version</li></ol></div>';
d.querySelector("#_eaglercraftX_crashReason").appendChild(document.createTextNode(a));try{var g=window.navigator.userAgent}catch(t){g="<error>"}d.querySelector("#_eaglercraftX_crashUserAgent").appendChild(document.createTextNode(g));nb&&nb();window.__curEaglerX188UnloadListenerCB=null;a="No GL_RENDERER string could be queried";try{const t=document.createElement("canvas");t.width=64;t.height=64;const D=t.getContext("webgl");if(D){if(D.getExtension("WEBGL_debug_renderer_info"))var m=D.getParameter(37446);
else(m=D.getParameter(WebGLRenderingContext.RENDERER))&&(m+=" [masked]");m&&(a=m)}}catch(t){}d.querySelector("#_eaglercraftX_crashWebGL").appendChild(document.createTextNode(a))}else alert("Compatibility error: "+a)}}var zc=null;
function tc(){if(zc)return zc;try{var a=Wa,b=Xa;if(!a){b=!1;var c=document.createElement("canvas");c.width=64;c.height=64;a=c.getContext("webgl2");a||(a=c.getContext("webgl"),a||(b=!0,a=c.getContext("experimental-webgl")))}return a?(c="",0<Ya&&(c+="webgl.version = "+a.getParameter(7938)+"\n"),c=a.getExtension("WEBGL_debug_renderer_info")?c+("webgl.renderer = "+a.getParameter(37446)+"\nwebgl.vendor = "+a.getParameter(37445)+"\n"):c+("webgl.renderer = "+a.getParameter(7937)+" [masked]\nwebgl.vendor = "+
a.getParameter(7936)+" [masked]\n"),0<Ya?(c+="\nwebgl.version.id = "+Ya+"\nwebgl.experimental = "+b,200===Ya?c+="\nwebgl.ext.ANGLE_instanced_arrays = "+!!a.getExtension("ANGLE_instanced_arrays")+"\nwebgl.ext.EXT_color_buffer_half_float = "+!!a.getExtension("EXT_color_buffer_half_float")+"\nwebgl.ext.EXT_shader_texture_lod = "+!!a.getExtension("EXT_shader_texture_lod")+"\nwebgl.ext.OES_fbo_render_mipmap = "+!!a.getExtension("OES_fbo_render_mipmap")+"\nwebgl.ext.OES_texture_float = "+!!a.getExtension("OES_texture_float")+
"\nwebgl.ext.OES_texture_half_float = "+!!a.getExtension("OES_texture_half_float")+"\nwebgl.ext.OES_texture_half_float_linear = "+!!a.getExtension("OES_texture_half_float_linear"):300<=Ya&&(c+="\nwebgl.ext.EXT_color_buffer_float = "+!!a.getExtension("EXT_color_buffer_float")+"\nwebgl.ext.EXT_color_buffer_half_float = "+!!a.getExtension("EXT_color_buffer_half_float")+"\nwebgl.ext.OES_texture_float_linear = "+!!a.getExtension("OES_texture_float_linear")),c+="\nwebgl.ext.EXT_texture_filter_anisotropic = "+
!!a.getExtension("EXT_texture_filter_anisotropic")+"\n"):c+="webgl.ext.ANGLE_instanced_arrays = "+!!a.getExtension("ANGLE_instanced_arrays")+"\nwebgl.ext.EXT_color_buffer_float = "+!!a.getExtension("EXT_color_buffer_float")+"\nwebgl.ext.EXT_color_buffer_half_float = "+!!a.getExtension("EXT_color_buffer_half_float")+"\nwebgl.ext.EXT_shader_texture_lod = "+!!a.getExtension("EXT_shader_texture_lod")+"\nwebgl.ext.OES_fbo_render_mipmap = "+!!a.getExtension("OES_fbo_render_mipmap")+"\nwebgl.ext.OES_texture_float = "+
!!a.getExtension("OES_texture_float")+"\nwebgl.ext.OES_texture_float_linear = "+!!a.getExtension("OES_texture_float_linear")+"\nwebgl.ext.OES_texture_half_float = "+!!a.getExtension("OES_texture_half_float")+"\nwebgl.ext.OES_texture_half_float_linear = "+!!a.getExtension("OES_texture_half_float_linear")+"\nwebgl.ext.EXT_texture_filter_anisotropic = "+!!a.getExtension("EXT_texture_filter_anisotropic")+"\n",zc=c):zc="Failed to query GPU info!\n"}catch(d){return zc="ERROR: could not query webgl info - "+
d+"\n"}}function uc(a){try{var b=window.navigator[a]}catch(c){b="<error>"}return"window.navigator."+a+" = "+b+"\n"}function vc(){try{var a=[];if("object"===typeof navigator.plugins){var b=navigator.plugins.length;if(0<b)for(var c=0;c<b;++c){var d=navigator.plugins[c];a.push({name:d.name,filename:d.filename,desc:d.description})}}var g=JSON.stringify(a)}catch(m){g="<error>"}return"window.navigator.plugins = "+g+"\n"}
function xc(a){try{var b=window.screen[a]}catch(c){b="<error>"}return"window.screen."+a+" = "+b+"\n"}function yc(){try{var a=window.location.href}catch(b){a="<error>"}return"window.location.href = "+a+"\n"}function wc(a){try{var b=window[a]}catch(c){b="<error>"}return"window."+a+" = "+b+"\n"};function Ac(a,b,c){const d=document.createElement("a");d.style.position="absolute";d.style.left="0px";d.style.top="0px";d.style.zIndex="-100";d.style.color="transparent";d.innerText="Download File";d.href=b;d.target="_blank";d.download=a;P.appendChild(d);setTimeout(function(){d.click();setTimeout(function(){P.removeChild(d)},50);c&&setTimeout(c,6E4)},50)}var Bc=0,Cc=null,Dc=null,Ec=null,Fc=null;
function Xb(a,b){if(Ec)Fc&&Fc(a,b);else for(a={msg:a,err:b,next:null},Dc&&(Dc.next=a),Cc||=a,Dc=a,++Bc;256<Bc;)--Bc,Cc&&=Cc.next}
function Zb(){function a(){t=!1;D=null;null!==z?(P.removeChild(z),y=z=null):null!==y&&(P.removeChild(y),y=null)}function b(h){try{window.localStorage&&window.localStorage.setItem(ea,h?"true":"false")}catch(n){}}function c(){try{if(window.localStorage){const h=window.localStorage.getItem(ea);return h&&"true"===h.toLowerCase()}return!1}catch(h){return!1}}function d(){if(Ec)Ec.focus();else{var h=Math.round(1E3*window.devicePixelRatio);const n=Math.round(400*window.devicePixelRatio);if(Ec=window.open("",
"_blank","top="+Math.round((window.screen.height-n)/2)+",left="+Math.round((window.screen.width-h)/2)+",width="+h+",height="+n+",menubar=0,status=0,titlebar=0,toolbar=0")){Ec.focus();B=Ec.document;B.write('<!DOCTYPE html><html><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>Debug Console</title><link type="image/png" rel="shortcut icon" href="'+Sa+'" /></head><body style="overflow-x:hidden;overflow-y:scroll;padding:0px;"><p id="loggerMessageContainer" style="overflow-wrap:break-word;white-space:pre-wrap;font:14px monospace;padding:10px;"></p></body></html>');
B.close();G=B.body;W=B.getElementById("loggerMessageContainer");for(h=Cc;h;)g(h.msg+"\n",h.err?"#DD0000":"#000000"),h=h.next;Dc=Cc=null;Bc=0;m();h=()=>{null!=Ec&&(Ec=null,b(!1))};Ec.addEventListener("beforeunload",h);Ec.addEventListener("unload",h)}else f("Logger popup was blocked!"),window.alert("ERROR: Popup blocked!\n\nPlease make sure you have popups enabled for this site!")}}function g(h,n){var v=B.createElement("span");v.innerText=h;v.style.color=n;W.appendChild(v);for(h=W.children;2048<h.length;)h[0].remove()}
function m(){setTimeout(()=>{Ec.scrollTo(0,G.scrollHeight||G.clientHeight)},1)}H.setClipboard=function(h){try{if(window.navigator.clipboard)return window.navigator.clipboard.writeText(h),!0}catch(n){f("Failed to set clipboard data!")}return!1};H.getClipboard=new WebAssembly.Suspending(async function(){var h=null;try{window.navigator.clipboard&&(h=await navigator.clipboard.readText())}catch(n){f("Failed to read clipboard data!")}return h});var t=!1,D=null,y=null,z=null;H.displayFileChooser=function(h,
n){a();if(ib){const q=z=document.createElement("div");q.classList.add("_eaglercraftX_mobile_file_chooser_popup");q.style.position="absolute";q.style.backgroundColor="white";q.style.fontFamily="sans-serif";q.style.top="10%";q.style.left="10%";q.style.right="10%";q.style.border="5px double black";q.style.padding="15px";q.style.textAlign="left";q.style.fontSize="20px";q.style.userSelect="none";q.style.zIndex="150";var v=document.createElement("h3");v.appendChild(document.createTextNode("File Chooser"));
q.appendChild(v);v=document.createElement("p");const x=y=document.createElement("input");x.type="file";x.accept=null===h?"."+n:h;x.multiple=!1;v.appendChild(x);q.appendChild(v);h=document.createElement("p");n=document.createElement("button");n.classList.add("_eaglercraftX_mobile_file_chooser_btn_cancel");n.style.fontSize="1.0em";n.addEventListener("click",function(){z===q&&(P.removeChild(q),y=z=null)});n.appendChild(document.createTextNode("Cancel"));h.appendChild(n);h.appendChild(document.createTextNode(" "));
n=document.createElement("button");n.classList.add("_eaglercraftX_mobile_file_chooser_btn_done");n.style.fontSize="1.0em";n.style.fontWeight="bold";n.addEventListener("click",function(){if(z===q){if(0<x.files.length){const k=x.files[0];k.arrayBuffer().then(function(u){t=!0;D={fileName:k.name,fileData:u}}).catch(function(){t=!0;D=null})}else t=!0,D=null;P.removeChild(q);y=z=null}});n.appendChild(document.createTextNode("Done"));h.appendChild(n);q.appendChild(h);P.appendChild(q)}else{const q=y=document.createElement("input");
q.type="file";q.style.position="absolute";q.style.left="0px";q.style.top="0px";q.style.zIndex="-100";q.accept=null===h?"."+n:h;q.multiple=!1;q.addEventListener("change",function(){if(y===q){if(0<q.files.length){const x=q.files[0];x.arrayBuffer().then(function(k){t=!0;D={fileName:x.name,fileData:k}}).catch(function(){t=!0;D=null})}else t=!0,D=null;P.removeChild(q);y=null}});P.appendChild(q);window.setTimeout(function(){q.click()},50)}};H.fileChooserHasResult=function(){return t};H.getFileChooserResult=
function(){t=!1;const h=D;D=null;return h};H.clearFileChooserResult=a;H.downloadFileWithNameU8=function(h,n){const v=URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));Ac(h,v,function(){URL.revokeObjectURL(v)})};H.downloadFileWithNameA=function(h,n){const v=URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));Ac(h,v,function(){URL.revokeObjectURL(v)})};H.downloadScreenshot=function(h,n){Ac(h,n.toDataURL("image/png"),null)};var B=null,G=null,W=null;const ea=Lb+".showDebugConsole",
L=Nb?"beforeunload":"unload";try{window.addEventListener(L,()=>{if(Ec){var h=Ec;W=G=B=Ec=null;h.close()}})}catch(h){}(Mb||c())&&d();ob=function(){b(!0);d()};Fc=function(h,n){var v=Ec.innerHeight+Ec.pageYOffset>=G.offsetHeight;g(h+"\n",n?"#DD0000":"#000000");v&&m()};H.showDebugConsole=ob;H.addLogMessage=Xb;H.isShowingDebugConsole=function(){return!!Ec};H.getFaviconURL=function(){return Sa};H.setResetSettingsCallback=function(){return{call:function(h){pb=h}}}};wa.getEPKFileData=function(a){const b=Pa[a];Pa[a]=null;return b};wa.getEPKFileCount=function(){return Pa.length};
if("undefined"!==typeof window){wa.loadImageFile0=new WebAssembly.Suspending(function(a,b){return new Promise(function(c){const d=URL.createObjectURL(new Blob([a],{type:b}));if(d){const g=document.createElement("img");g.addEventListener("load",function(){URL.revokeObjectURL(d);c({width:g.width,height:g.height,img:g})});g.addEventListener("error",function(){URL.revokeObjectURL(d);c(null)});g.src=d}else c(null)})});var Gc=null,Hc=null;wa.loadImageFile1=function(a,b){const c=a.width,d=a.height;if(a=
a.img)Gc||=document.createElement("canvas"),Gc.width<c&&(Gc.width=c),Gc.height<d&&(Gc.height=d),Hc||(Hc=Gc.getContext("2d",{willReadFrequently:!0}),Hc.imageSmoothingEnabled=!1),Hc.clearRect(0,0,c,d),Hc.drawImage(a,0,0,c,d),b.set(Hc.getImageData(0,0,c,d).data,0)}}else C(wa,"loadImageFile0"),C(wa,"loadImageFile1");var Ic=null;
function ec(a){ya.getContext=function(){return a};ya.initKeepAliveHack=function(b,c){b=URL.createObjectURL(new Blob([V.slice(b,b+c)],{type:"audio/wav"}));c=document.createElement("audio");c.classList.add("_eaglercraftX_keepalive_hack");c.setAttribute("style","display:none;");c.autoplay=!1;c.loop=!0;c.addEventListener("seeked",function(){});c.addEventListener("canplay",function(){Ic&&"hidden"===document.visibilityState&&Ic.play()});const d=document.createElement("source");d.type="audio/wav";d.src=
b;c.appendChild(d);P.appendChild(c);Ic=c};qb=function(){Ic&&("hidden"===document.visibilityState?Ic.play():Ic.pause())};ya.setupPanner=function(b,c,d,g,m){b.maxDistance=c;b.rolloffFactor=1;b.panningModel="HRTF";b.distanceModel="linear";b.coneInnerAngle=360;b.coneOuterAngle=0;b.coneOuterGain=0;b.setOrientation(0,1,0);b.setPosition(d,g,m)};ya.registerIsEndedHandler=function(b,c){c.selfEndHandler||(c.selfEndHandler=function(){c.isEnded=!0});b.addEventListener("ended",c.selfEndHandler)};ya.releaseIsEndedHandler=
function(b,c){c.selfEndHandler&&b.removeEventListener("ended",c.selfEndHandler)};ya.decodeAudioBrowser=new WebAssembly.Suspending(function(b,c){return new Promise(function(d){const g=new Uint8Array(b.length);g.set(b,0);a.decodeAudioData(g.buffer,d,function(){f("Failed to load audio: {}",c);d(null)})})})}function fc(){ya.getContext=function(){return null};C(ya,"setupPanner");C(ya,"initKeepAliveHack");C(ya,"registerIsEndedHandler");C(ya,"releaseIsEndedHandler");C(ya,"decodeAudioBrowser")};function Jc(a){return"string"===typeof a?a:"undefined"===typeof a?null:"string"===typeof a[0]?a[0]:null}function Kc(a){return"undefined"===typeof a?null:"undefined"===typeof a.data?null:a.data}
za.openDB=new WebAssembly.Suspending(function(a){return new Promise(function(b){if("undefined"===typeof indexedDB)b({failedInit:!0,failedLocked:!1,failedError:"IndexedDB not supported",database:null});else{try{var c=indexedDB.open(a,1)}catch(g){b({failedInit:!0,failedLocked:!1,failedError:"Exception opening database",database:null});return}var d=b;c.addEventListener("success",function(){d&&d({failedInit:!1,failedLocked:!1,failedError:null,database:c.result});d=null});c.addEventListener("blocked",
function(){d&&d({failedInit:!1,failedLocked:!0,failedError:"Database is locked",database:null});d=null});c.addEventListener("error",function(){d&&d({failedInit:!0,failedLocked:!1,failedError:"Opening database failed",database:null});d=null});c.addEventListener("upgradeneeded",function(){c.result.createObjectStore("filesystem",{keyPath:["path"]})})}})});
function Lc(a,b){return new Promise(function(c){const d=a.transaction("filesystem","readwrite").objectStore("filesystem").delete([b]);d.addEventListener("success",function(){c(!0)});d.addEventListener("error",function(){c(!1)})})}za.eaglerDelete=new WebAssembly.Suspending(Lc);
function Mc(a,b){return new Promise(function(c){const d=a.transaction("filesystem","readonly").objectStore("filesystem").get([b]);d.addEventListener("success",function(){c(Kc(d.result))});d.addEventListener("error",function(){c(null)})})}za.eaglerRead=new WebAssembly.Suspending(Mc);
function Nc(a,b,c){return new Promise(function(d){const g=a.transaction("filesystem","readwrite").objectStore("filesystem").put({path:b,data:c});g.addEventListener("success",function(){d(!0)});g.addEventListener("error",function(){d(!1)})})}za.eaglerWrite=new WebAssembly.Suspending(function(a,b,c,d){return Nc(a,b,V.slice(c,c+d))});
za.eaglerExists=new WebAssembly.Suspending(function(a,b){return new Promise(function(c){const d=a.transaction("filesystem","readonly").objectStore("filesystem").count([b]);d.addEventListener("success",function(){c(0<d.result)});d.addEventListener("error",function(){c(!1)})})});za.eaglerMove=new WebAssembly.Suspending(async function(a,b,c){const d=await Mc(a,b);return d&&await Nc(a,c,d)?await Lc(a,b):!1});
za.eaglerCopy=new WebAssembly.Suspending(async function(a,b,c){return(b=await Mc(a,b))&&await Nc(a,c,b)});za.eaglerSize=new WebAssembly.Suspending(function(a,b){return new Promise(function(c){const d=a.transaction("filesystem","readonly").objectStore("filesystem").get([b]);d.addEventListener("success",function(){const g=Kc(d.result);c(g?g.byteLength:-1)});d.addEventListener("error",function(){c(-1)})})});
function Oc(a){if(0===a.length)return-1;for(var b=0,c=0,d=a.length;c<d;++c)47===a.charCodeAt(c)&&++b;return b}
za.eaglerIterate=new WebAssembly.Suspending(function(a,b,c){return new Promise(function(d){const g=[],m=a.transaction("filesystem","readonly").objectStore("filesystem").openCursor(),t=0===b.length,D=c?-1:Oc(b);m.addEventListener("success",function(){const y=m.result;if(null===y||null===y.key)d({length:g.length,getRow:function(B){return g[B]}});else{var z=Jc(y.key);null!=z&&(!t&&!z.startsWith(b)||!c&&Oc(z)!==D||g.push(z));y.continue()}});m.addEventListener("error",function(){d(null)})})});async function gc(){function a(){var l=window.devicePixelRatio;.01>l&&(l=1);ea=W=0;for(var A=R;A&&!isNaN(A.offsetLeft)&&!isNaN(A.offsetTop);)W+=A.offsetLeft-A.scrollLeft,ea+=A.offsetTop-A.scrollTop,A=A.offsetParent;A=P.clientWidth*l|0;var T=P.clientHeight*l|0,Q=0,aa=0,qa=A,na=T;if(Y){na=window.visualViewport;var ba=na.scale;Q=na.pageLeft*l*ba;aa=na.pageTop*l*ba;qa=na.width*l*ba;na=na.height*l*ba;1>qa&&(qa=1);1>na&&(na=1);0>Q?(qa+=Q,Q=0):Q>=A&&(Q=A-1);0>aa?(na+=aa,aa=0):aa>=T&&(aa=T-1);Q+qa>A&&(qa=
A-Q);aa+na>T&&(na=T-aa)}ba={eventTypeMask:0};K!==l&&(K=l,ba.eventTypeMask|=4,ba.windowDPI=l);if(w!==A||E!==T)w=A,E=T,ba.eventTypeMask|=1,ba.windowWidth=A,ba.windowHeight=T;if(U!==Q||X!==aa||eb!==qa||Ha!==na)U=Q,X=aa,eb=qa,Ha=na,ba.eventTypeMask|=2,ba.visualViewportX=Q,ba.visualViewportY=aa,ba.visualViewportW=qa,ba.visualViewportH=na;0!==ba.eventTypeMask&&Z(0,9,ba)}function b(l){const A=l.length,T=Array(A);for(var Q=0;Q<A;++Q){const aa=l.item(Q);T[Q]={pointX:aa.pageX-W,pointY:aa.pageY-ea,radius:.5*
(aa.radiusX+aa.radiusY),force:aa.force,pointUID:aa.identifier}}return T}function c(l,A){return{eventType:l,keyCode:A.code||null,keyName:A.key||null,legacyCode:"number"===typeof A.which?A.which:"number"===typeof A.keyCode?A.keyCode:0,location:A.location,mods:(A.ctrlKey?1:0)|(A.shiftKey?2:0)|(A.metaKey?4:0)}}function d(){return new Promise(function(l){if(-1!==F)throw Error("Main thread is already waiting for VSync!");const A=[!1];window.requestAnimationFrame(function(){A[0]||(A[0]=!0,-1!==F&&(window.clearTimeout(F),
F=-1),l())});F=window.setTimeout(function(){A[0]||(A[0]=!0,F=-1,l())},20)})}function g(l){return new Promise(function(A){setTimeout(A,l)})}function m(l){if(0<l&&1E3>=l){const T=1E3/l;if(0===ka)ka=performance.now()+T;else{l=performance.now();var A=ka-l|0;if(0<A)return!Ub&&Pc?Qc().then(function(){var Q=performance.now(),aa=ka-Q|0;if(0<aa)return g(aa).then(function(){var qa=performance.now();(ka+=T)<qa&&(ka=qa)});(ka+=T)<Q&&(ka=Q)}):g(A).then(function(){var Q=performance.now();(ka+=T)<Q&&(ka=Q)});(ka+=
T)<l&&(ka=l)}}else ka=0;return Ub?Rc(0):Qc()}function t(l){if(Ba){Ca=!!l;var A=performance.now()|0;if(l){xa=!0;try{R.requestPointerLock()}catch(T){}-1!==ua&&window.clearTimeout(ua);ua=-1;3E3>A-fb&&(ua=window.setTimeout(function(){try{R.requestPointerLock()}catch(T){}},3100-(A-fb)))}else if(-1!==ua&&window.clearTimeout(ua),ua=-1,!xa)try{document.exitPointerLock()}catch(T){}}}function D(){if(Ia)if(fa.matches){if(p)try{navigator.keyboard.unlock()}catch(l){}try{document.exitFullscreen()}catch(l){}}else{if(p)try{navigator.keyboard.lock()}catch(l){}try{R.requestFullscreen()}catch(l){}}}
function y(){B()?z():h?(h.blur(),h.value="",setTimeout(function(){h&&(L?L.removeChild(h):h.remove(),h=null);L&&(P.removeChild(L),L=null)},10)):(L&&(P.removeChild(L),L=null),L=document.createElement("form"),L.setAttribute("autocomplete","off"),L.classList.add("_eaglercraftX_text_input_wrapper"),L.style.position="absolute",L.style.top="0px",L.style.left="0px",L.style.right="0px",L.style.bottom="0px",L.style.zIndex="-100",L.style.margin="0px",L.style.padding="0px",L.style.border="none",L.addEventListener("submit",
function(l){l.preventDefault();l.stopPropagation();l=l.timeStamp;l&&(0!==x&&10>l-x||0!==k&&10>l-k||0!==u&&10>l-u)||(q||(e("Note: Generating return keystroke from submit event on form, this browser probably doesn't generate keydown/beforeinput/input when enter/return is pressed on the on-screen keyboard"),q=!0),Z(0,3,{eventType:0,absoluteCode:28,absoluteChar:10}))}),h=document.createElement("input"),h.type="password",h.value=" ",h.classList.add("_eaglercraftX_text_input_element"),h.setAttribute("autocomplete",
"off"),h.style.position="absolute",h.style.top="0px",h.style.left="0px",h.style.right="0px",h.style.bottom="0px",h.style.zIndex="-100",h.style.margin="0px",h.style.padding="0px",h.style.border="none",h.style.setProperty("-webkit-touch-callout","default"),h.addEventListener("beforeinput",function(l){if(h===l.target){n||(e("Note: Caught beforeinput event from on-screen keyboard, browser probably does not generate global keydown/keyup events on text fields, or does not respond to cancelling keydown"),
n=!0);var A=l.timeStamp;if(A){if(0!==x&&10>A-x)return;k=A}l.preventDefault();l.stopPropagation();switch(l.inputType){case "insertParagraph":case "insertLineBreak":Z(0,3,{eventType:0,absoluteCode:28,absoluteChar:10});break;case "deleteWordBackward":case "deleteSoftLineBackward":case "deleteHardLineBackward":case "deleteEntireSoftLine":case "deleteContentBackward":case "deleteContent":Z(0,3,{eventType:0,absoluteCode:14,absoluteChar:0});break;case "deleteWordForward":case "deleteSoftLineForward":case "deleteHardLineForward":case "deleteContentForward":Z(0,
3,{eventType:0,absoluteCode:211,absoluteChar:0});break;case "insertText":case "insertCompositionText":case "insertReplacementText":(l=l.data)&&0<l.length&&Z(0,3,{eventType:1,codepoints:l});break;case "insertFromPaste":case "insertFromPasteAsQuotation":case "insertFromDrop":case "insertFromYank":case "insertLink":(l=l.data)&&0<l.length&&Z(0,4,l);break;case "historyUndo":case "historyRedo":case "deleteByDrag":case "deleteByCut":break;default:e('Ignoring InputEvent.inputType "{}" from on-screen keyboard',
l.inputType)}}}),h.addEventListener("input",function(l){if(h===l.target){v||(e("Note: Caught legacy input events from on-screen keyboard, browser could be outdated and doesn't support beforeinput event, or does not respond to cancelling beforeinput"),v=!0);if(l=l.timeStamp){if(0!==x&&10>l-x||0!==k&&10>l-k)return;u=l}l=h.value;var A=l.length;0===A?Z(0,3,{eventType:0,absoluteCode:14,absoluteChar:0}):1===A?Z(0,3,{eventType:1,codepoints:l}):(l=l.trim(),A=l.length,0===A?Z(0,3,{eventType:0,absoluteCode:57,
absoluteChar:32}):Z(0,3,{eventType:1,codepoints:l.charAt(A-1)}));h.value=" ";h.setSelectionRange(1,1)}}),h.addEventListener("focus",function(l){h===l.target&&(h.value=" ",h.setSelectionRange(1,1))}),h.addEventListener("select",function(l){h===l.target&&(l.preventDefault(),l.stopPropagation(),h.value=" ",h.setSelectionRange(1,1))}),L.appendChild(h),P.appendChild(L),h.value=" ",h.focus(),h.select(),h.setSelectionRange(1,1))}function z(){if(h){h.blur();h.value="";const l=h,A=L;window.setTimeout(function(){null!==
A?(A.removeChild(l),A.remove()):l.remove()},10);L=h=null}else L&&(P?P.removeChild(L):L.remove(),L=null)}function B(){return!!h&&document.activeElement===h}var G=null,W=0,ea=0,L=null,h=null,n=!1,v=!1,q=!1,x=0,k=0,u=0,w=-1,E=-1,K=-1,Y=!1,U=-1,X=-1,eb=-1,Ha=-1,Ba=!1,Ca=!1,xa=!1,fb=0,ua=-1,Ia=!1,fa=null,p=!1,r=!1,F=-1,M=!1,S=null,ca=null,va=null,Ua=null,rb=null,sb=null,tb=null,ub=null,vb=null,wb=null,xb=null,yb=null,zb=null,Ab=null,Bb=null,Cb=null,Db=null,Eb=null,Fb=null,Gb=null,Hb=null,Ib=null,Jb=null,
Kb=null;G=document.createElement("div");G.classList.add("_eaglercraftX_keyboard_open_zone");G.style.display="none";G.style.position="absolute";G.style.backgroundColor="transparent";G.style.top="0px";G.style.left="0px";G.style.width="0px";G.style.height="0px";G.style.zIndex="100";G.style.touchAction="pan-x pan-y";G.style.setProperty("-webkit-touch-callout","none");G.style.setProperty("-webkit-tap-highlight-color","rgba(255, 255, 255, 0)");P.appendChild(G);a();P.addEventListener("contextmenu",S=function(l){l.target!==
Sc&&(l.preventDefault(),l.stopPropagation())});R.addEventListener("mousedown",ca=function(l){l.preventDefault();l.stopPropagation();Ba&&Ca&&document.pointerLockElement!==R?t(1):Z(0,0,{eventType:0,posX:l.offsetX,posY:l.offsetY,button:l.button})});R.addEventListener("mouseup",va=function(l){l.preventDefault();l.stopPropagation();Z(0,0,{eventType:1,posX:l.offsetX,posY:l.offsetY,button:l.button})});R.addEventListener("mousemove",Ua=function(l){l.preventDefault();l.stopPropagation();Z(0,0,{eventType:2,
posX:l.offsetX,posY:l.offsetY,movementX:l.movementX,movementY:l.movementY})});R.addEventListener("mouseenter",rb=function(){Z(0,7,null)});R.addEventListener("mouseleave",sb=function(){Z(0,8,null)});R.addEventListener("touchstart",tb=function(l){l.preventDefault();l.stopPropagation();Z(0,2,{eventType:0,changedTouches:b(l.changedTouches),targetTouches:b(l.targetTouches)});z()});R.addEventListener("touchend",ub=function(l){l.preventDefault();l.stopPropagation();Z(0,2,{eventType:2,changedTouches:b(l.changedTouches),
targetTouches:b(l.targetTouches)})});R.addEventListener("touchmove",vb=function(l){l.preventDefault();l.stopPropagation();Z(0,2,{eventType:1,changedTouches:b(l.changedTouches),targetTouches:b(l.targetTouches)})});R.addEventListener("touchcancel",wb=function(l){Z(0,2,{eventType:2,changedTouches:b(l.changedTouches),targetTouches:b(l.targetTouches)})});R.addEventListener("wheel",Eb=function(l){l.preventDefault();l.stopPropagation();Z(0,0,{eventType:3,posX:l.offsetX,posY:l.offsetY,wheel:l.deltaY})});
window.addEventListener("blur",Gb=function(){Z(0,6,null)});window.addEventListener("focus",Fb=function(){Z(0,5,null)});document.addEventListener("visibilitychange",Kb=function(){qb&&qb()});window.addEventListener("keydown",zb=function(l){Tc||(l.preventDefault(),l.stopPropagation());"F11"!==l.key||l.repeat?(Z(0,1,c(l.repeat?2:0,l)),l.timeStamp&&"Unidentified"!==l.key&&(x=l.timeStamp)):D()});window.addEventListener("keyup",Ab=function(l){Tc||(l.preventDefault(),l.stopPropagation());Z(0,1,c(1,l))});
G.addEventListener("touchstart",Bb=function(l){l.preventDefault();l.stopPropagation()});G.addEventListener("touchend",Cb=function(l){l.preventDefault();l.stopPropagation();y()});G.addEventListener("touchmove",Db=function(l){l.preventDefault();l.stopPropagation()});(Ba="function"===typeof document.exitPointerLock)?(document.addEventListener("pointerlockchange",Hb=function(){window.setTimeout(function(){const l=document.pointerLockElement===R;l||Ca&&(fb=performance.now()|0);Ca=l},60);xa=!1}),document.addEventListener("pointerlockerror",
Ib=function(){xa=!1})):f("Pointer lock is not supported on this browser");(Ia="function"===typeof document.exitFullscreen)?(fa=window.matchMedia("(display-mode: fullscreen)"),(p=!(!navigator.keyboard||!navigator.keyboard.lock))&&fa.addEventListener("change",Jb=function(){fa.matches||navigator.keyboard.unlock()})):f("Fullscreen is not supported on this browser");if("undefined"!==typeof window.visualViewport)if("body"===Va.tagName.toLowerCase())Y=!0;else{const l=document.body;10>=Math.abs(l.clientWidth-
P.clientWidth)&&10>=Math.abs(l.clientHeight-P.clientHeight)&&(Y=!0)}else Y=!1;Y&&e("Note: Detected game is embedded in body, some screens may be resized to window.visualViewport instead for a better mobile experience");try{await d(),r=!0}catch(l){r=!1}r||f("VSync is not supported on this browser");(M="function"===typeof navigator.getGamepads)?(window.addEventListener("gamepadconnected",xb=function(){Z(0,10,{eventType:0})}),window.addEventListener("gamepaddisconnected",yb=function(l){Z(0,10,{eventType:1,
gamepad:l.gamepad})})):f("Gamepad detected as unsupported!");I.keyboardLayoutSupported=function(){return!(!navigator.keyboard||!navigator.keyboard.getLayoutMap)};I.iterateKeyboardLayout=new WebAssembly.Suspending(async function(){const l=[];try{const A=await navigator.keyboard.getLayoutMap();A&&A.forEach&&A.forEach(function(T,Q){l.push({key:T,value:Q})})}catch(A){}return l});I.updateCanvasSize=function(l,A){R.width!==l&&(R.width=l);R.height!==A&&(R.height=A)};var ka=0;I.updatePlatformAndSleep=new WebAssembly.Suspending(function(l,
A,T){a();if("string"!==typeof document.visibilityState||"visible"===document.visibilityState){if(r&&A)return ka=0,d();T&&Wa.finish();return 0>=l?(ka=0,Ub?Rc(0):Qc()):m(l)}ka=0;return g(50)});I.isVSyncSupported=function(){return r};I.mouseSetGrabbed=t;I.isMouseGrabSupported=function(){return Ba};I.isMouseGrabbed=function(){return Ca};I.isPointerLocked=function(){return Ba&&(xa||document.pointerLockElement===R)};I.supportsFullscreen=function(){return Ia};I.toggleFullscreen=D;I.isFullscreen=function(){return Ia&&
fa.matches};I.touchSetOpenKeyboardZone=function(l,A,T,Q){0!==T&&0!==Q?(G.style.display="block",G.style.top=""+(E-A-Q)/K+"px",G.style.left=""+l/K+"px",G.style.width=""+T/K+"px",G.style.height=""+Q/K+"px"):(G.style.display="none",G.style.top="0px",G.style.left="0px",G.style.width="0px",G.style.height="0px")};I.touchCloseDeviceKeyboard=z;I.touchIsDeviceKeyboardOpenMAYBE=B;I.gamepadSupported=function(){return M};I.isVisualViewport=function(){return Y};nb=function(){try{S&&(P.removeEventListener("contextmenu",
S),S=null),ca&&(R.removeEventListener("mousedown",ca),ca=null),va&&(R.removeEventListener("mouseup",va),va=null),Ua&&(R.removeEventListener("mousemove",Ua),Ua=null),rb&&(R.removeEventListener("mouseenter",rb),rb=null),sb&&(R.removeEventListener("mouseleave",sb),sb=null),tb&&(R.removeEventListener("touchstart",tb),tb=null),ub&&(R.removeEventListener("touchend",ub),ub=null),vb&&(R.removeEventListener("touchmove",vb),vb=null),wb&&(R.removeEventListener("touchcancel",wb),wb=null),xb&&(window.removeEventListener("gamepadconnected",
xb),xb=null),yb&&(window.removeEventListener("gamepaddisconnected",yb),yb=null),zb&&(window.removeEventListener("keydown",zb),zb=null),Ab&&(window.removeEventListener("keyup",Ab),Ab=null),Bb&&(G.removeEventListener("touchstart",Bb),Bb=null),Cb&&(G.removeEventListener("touchend",Cb),Cb=null),Db&&(G.removeEventListener("touchmove",Db),Db=null),Eb&&(R.removeEventListener("wheel",Eb),Eb=null),Fb&&(window.removeEventListener("focus",Fb),Fb=null),Gb&&(window.removeEventListener("blur",Gb),Gb=null),Kb&&
(document.removeEventListener("visibilitychange",Kb),Kb=null),Hb&&(document.removeEventListener("pointerlockchange",Hb),Hb=null),Ib&&(document.removeEventListener("pointerlockerror",Ib),Ib=null),Jb&&(fa.removeEventListener("change",Jb),Jb=null)}catch(l){f("Failed to remove event listeners! {}",l)}nb=null}};(function(){function a(){this._socket.close()}function b(k){this._socket.send(k)}function c(k){this._socket.send(k)}function d(){return this._frameCountStr+this._frameCountBin}function g(){const k=this._queue;return k?(k._next===k&&k._prev===k?this._queue=null:(this._queue=k._next,k._prev._next=k._next,k._next._prev=k._prev),k._next=null,k._prev=null,0===k.type?--this._frameCountStr:--this._frameCountBin,k):null}function m(){var k=this._frameCountStr+this._frameCountBin;if(0===k)return null;k=Array(k);
var u=0,w=this._queue;const E=w;do{k[u++]=w;var K=w._next;w._next=null;w._prev=null;w=K}while(w!==E);this._queue=null;this._frameCountBin=this._frameCountStr=0;return k}function t(){this._queue=null;this._frameCountBin=this._frameCountStr=0}function D(k,u){var w=k._queue;if(!w)return null;const E=w;do{var K=w._next;if(w.type===u)return u=w._prev,K===w&&u===w?k._queue=null:(w===E&&(k._queue=K),u._next=K,K._prev=u),w._next=null,w._prev=null,w;w=K}while(w!==E);return null}function y(k,u,w){var E=0,K=
k._queue,Y=K;do{var U=K._next;K.type===u&&(w[E++]=K);K=U}while(K!==Y);w.length=E;for(Y=0;Y<E;++Y)K=w[Y],U=K._next,u=K._prev,U===K&&u===K?k._queue=null:(K===k._queue&&(k._queue=U),u._next=U,U._prev=u)}function z(){return this._frameCountStr}function B(){if(0===this._frameCountStr)return null;const k=D(this,0);k?--this._frameCountStr:this._frameCountStr=0;return k}function G(){var k=this._frameCountStr;if(0===k)return null;k=Array(k);y(this,0,k);this._frameCountStr=0;return k}function W(){const k=this._frameCountStr;
if(0===k)return null;y(this,0,Array(k));this._frameCountStr=0}function ea(){return this._frameCountBin}function L(){if(0===this._frameCountBin)return null;const k=D(this,1);k?--this._frameCountBin:this._frameCountBin=0;return k}function h(){var k=this._frameCountBin;if(0===k)return null;k=Array(k);y(this,1,k);this._frameCountBin=0;return k}function n(){const k=this._frameCountBin;if(0===k)return null;y(this,1,Array(k));this._frameCountBin=0}function v(k){this._enableStringFrames=k}function q(k){this._enableBinaryFrames=
k}function x(k){const u="string"===typeof k;if(u){if(!this._enableStringFrames)return}else if(!this._enableBinaryFrames)return;k={type:u?0:1,data:k,timestamp:performance.now(),_next:null,_prev:null};const w=this._queue;if(w){const E=w._prev;E._next=k;k._prev=E;k._next=w;w._prev=k}else this._queue=k,k._next=k,k._prev=k;u?++this._frameCountStr:++this._frameCountBin}Aa.createWebSocketHandle=function(k){let u;try{u=new WebSocket(k)}catch(E){return f("Failed to create WebSocket: {}",k),ma("Exception Caught",
E),null}u.binaryType="arraybuffer";const w={state:1,_socket:u,_queue:null,_frameCountStr:0,_frameCountBin:0,_addRecievedFrame:x,_enableStringFrames:!0,_enableBinaryFrames:!0,closeSocket:a,sendStringFrame:b,sendBinaryFrame:c,availableFrames:d,getNextFrame:g,getAllFrames:m,clearFrames:t,availableStringFrames:z,getNextStringFrame:B,getAllStringFrames:G,clearStringFrames:W,availableBinaryFrames:ea,getNextBinaryFrame:L,getAllBinaryFrames:h,clearBinaryFrames:n,setEnableStringFrames:v,setEnableBinaryFrames:q};
u.addEventListener("open",function(){w.state=2});u.addEventListener("message",function(E){w._addRecievedFrame(E.data)});u.addEventListener("close",function(){3!==w.state&&(w.state=0)});u.addEventListener("error",function(){1===w.state&&(w.state=3)});return w}})();function ic(a,b){var c=Tb;const d=c&&200===b?a.getExtension("OES_vertex_array_object"):null,g=c&&200===b?a.getExtension("ANGLE_instanced_arrays"):null,m=c&&200===b&&null!==g,t=c&&(310===b||300===b)&&null!==a.getExtension("EXT_color_buffer_float"),D=c&&!t&&(310===b||300===b||200===b)&&null!==a.getExtension("EXT_color_buffer_half_float"),y=c&&200===b&&null!==a.getExtension("EXT_shader_texture_lod"),z=c&&200===b&&null!==a.getExtension("OES_fbo_render_mipmap"),B=c&&200===b&&null!==d,G=c&&200===b&&null!==
a.getExtension("OES_texture_float"),W=c&&300<=b&&null!==a.getExtension("OES_texture_float_linear"),ea=c&&200===b&&null!==a.getExtension("OES_texture_half_float"),L=c&&200===b&&null!==a.getExtension("OES_texture_half_float_linear");c=c&&null!==a.getExtension("EXT_texture_filter_anisotropic");const h=null!==a.getExtension("WEBGL_debug_renderer_info"),n=300<=b?0:200===b&&B?1:-1,v=300<=b?0:200===b&&m?1:-1,q=[b,n,v,0,0];if(300<=b||z)q[3]|=4;if(300<=b||y)q[3]|=8;300<=b&&(q[3]|=16);(320<=b||(300<=b||G)&&
(t||D))&&(q[3]|=32);(320<=b||(300<=b||ea)&&t)&&(q[3]|=64);c&&(q[3]|=128);(300<=b||L)&&(q[4]|=1);300<=b&&W&&(q[4]|=2);J.getCapBits=function(k){return q[k]};J.glEnable=a.enable.bind(a);J.glDisable=a.disable.bind(a);J.glClearColor=a.clearColor.bind(a);J.glClearDepth=a.clearDepth.bind(a);J.glClear=a.clear.bind(a);J.glDepthFunc=a.depthFunc.bind(a);J.glDepthMask=a.depthMask.bind(a);J.glCullFace=a.cullFace.bind(a);J.glViewport=a.viewport.bind(a);J.glBlendFunc=a.blendFunc.bind(a);J.glBlendFuncSeparate=a.blendFuncSeparate.bind(a);
J.glBlendEquation=a.blendEquation.bind(a);J.glBlendColor=a.blendColor.bind(a);J.glColorMask=a.colorMask.bind(a);J.glDrawBuffers=300<=b?a.drawBuffers.bind(a):pa("glDrawBuffers");J.glReadBuffer=300<=b?a.readBuffer.bind(a):pa("glReadBuffer");J.glReadPixels=a.readPixels.bind(a);J.glPolygonOffset=a.polygonOffset.bind(a);J.glLineWidth=a.lineWidth.bind(a);J.glGenBuffers=a.createBuffer.bind(a);J.glGenTextures=a.createTexture.bind(a);J.glCreateProgram=a.createProgram.bind(a);J.glCreateShader=a.createShader.bind(a);
J.glCreateFramebuffer=a.createFramebuffer.bind(a);J.glCreateRenderbuffer=a.createRenderbuffer.bind(a);J.glGenQueries=300<=b?a.createQuery.bind(a):pa("glGenQueries");J.glDeleteBuffers=a.deleteBuffer.bind(a);J.glDeleteTextures=a.deleteTexture.bind(a);J.glDeleteProgram=a.deleteProgram.bind(a);J.glDeleteShader=a.deleteShader.bind(a);J.glDeleteFramebuffer=a.deleteFramebuffer.bind(a);J.glDeleteRenderbuffer=a.deleteRenderbuffer.bind(a);J.glDeleteQueries=300<=b?a.deleteQuery.bind(a):pa("glDeleteQueries");
J.glBindBuffer=a.bindBuffer.bind(a);J.glBufferData=a.bufferData.bind(a);J.glBufferSubData=a.bufferSubData.bind(a);J.glEnableVertexAttribArray=a.enableVertexAttribArray.bind(a);J.glDisableVertexAttribArray=a.disableVertexAttribArray.bind(a);J.glVertexAttribPointer=a.vertexAttribPointer.bind(a);J.glActiveTexture=a.activeTexture.bind(a);J.glBindTexture=a.bindTexture.bind(a);J.glTexParameterf=a.texParameterf.bind(a);J.glTexParameteri=a.texParameteri.bind(a);J.glTexImage3D=300<=b?a.texImage3D.bind(a):
pa("glTexImage3D");J.glTexImage2D=a.texImage2D.bind(a);J.glTexSubImage2D=a.texSubImage2D.bind(a);J.glCopyTexSubImage2D=a.copyTexSubImage2D.bind(a);J.glTexStorage2D=300<=b?a.texStorage2D.bind(a):pa("glTexStorage2D");J.glPixelStorei=a.pixelStorei.bind(a);J.glGenerateMipmap=a.generateMipmap.bind(a);J.glShaderSource=a.shaderSource.bind(a);J.glCompileShader=a.compileShader.bind(a);J.glGetShaderi=a.getShaderParameter.bind(a);J.glGetShaderInfoLog=a.getShaderInfoLog.bind(a);J.glUseProgram=a.useProgram.bind(a);
J.glAttachShader=a.attachShader.bind(a);J.glDetachShader=a.detachShader.bind(a);J.glLinkProgram=a.linkProgram.bind(a);J.glGetProgrami=a.getProgramParameter.bind(a);J.glGetProgramInfoLog=a.getProgramInfoLog.bind(a);J.glDrawArrays=a.drawArrays.bind(a);J.glDrawElements=a.drawElements.bind(a);J.glDrawRangeElements=300<=b?a.drawRangeElements.bind(a):pa("glDrawRangeElements");J.glBindAttribLocation=a.bindAttribLocation.bind(a);J.glGetAttribLocation=a.getAttribLocation.bind(a);J.glGetUniformLocation=a.getUniformLocation.bind(a);
J.glGetUniformBlockIndex=300<=b?a.getUniformBlockIndex.bind(a):pa("glGetUniformBlockIndex");J.glBindBufferRange=300<=b?a.bindBufferRange.bind(a):pa("glBindBufferRange");J.glUniformBlockBinding=300<=b?a.uniformBlockBinding.bind(a):pa("glUniformBlockBinding");J.glUniform1f=a.uniform1f.bind(a);J.glUniform2f=a.uniform2f.bind(a);J.glUniform3f=a.uniform3f.bind(a);J.glUniform4f=a.uniform4f.bind(a);J.glUniform1i=a.uniform1i.bind(a);J.glUniform2i=a.uniform2i.bind(a);J.glUniform3i=a.uniform3i.bind(a);J.glUniform4i=
a.uniform4i.bind(a);J.glUniformMatrix2fv=a.uniformMatrix2fv.bind(a);J.glUniformMatrix3fv=a.uniformMatrix3fv.bind(a);J.glUniformMatrix4fv=a.uniformMatrix4fv.bind(a);J.glUniformMatrix3x2fv=300<=b?a.uniformMatrix3x2fv.bind(a):pa("glUniformMatrix3x2fv");J.glUniformMatrix4x2fv=300<=b?a.uniformMatrix4x2fv.bind(a):pa("glUniformMatrix4x2fv");J.glUniformMatrix4x3fv=300<=b?a.uniformMatrix4x3fv.bind(a):pa("glUniformMatrix4x3fv");J.glBindFramebuffer=a.bindFramebuffer.bind(a);J.glCheckFramebufferStatus=a.checkFramebufferStatus.bind(a);
J.glBlitFramebuffer=300<=b?a.blitFramebuffer.bind(a):pa("glBlitFramebuffer");J.glRenderbufferStorage=a.renderbufferStorage.bind(a);J.glFramebufferTexture2D=a.framebufferTexture2D.bind(a);J.glFramebufferTextureLayer=300<=b?a.framebufferTextureLayer.bind(a):pa("glFramebufferTextureLayer");J.glBindRenderbuffer=a.bindRenderbuffer.bind(a);J.glFramebufferRenderbuffer=a.framebufferRenderbuffer.bind(a);J.glGetError=a.getError.bind(a);J.getAllExtensions=a.getSupportedExtensions.bind(a);J.isContextLost=a.isContextLost.bind(a);
const x=[];m&&x.push("ANGLE_instanced_arrays");t&&x.push("EXT_color_buffer_float");D&&x.push("EXT_color_buffer_half_float");y&&x.push("EXT_shader_texture_lod");z&&x.push("OES_fbo_render_mipmap");B&&x.push("OES_vertex_array_object");G&&x.push("OES_texture_float");W&&x.push("OES_texture_float_linear");ea&&x.push("OES_texture_half_float");L&&x.push("OES_texture_half_float_linear");c&&x.push("EXT_texture_filter_anisotropic");h&&x.push("WEBGL_debug_renderer_info");J.dumpActiveExtensions=function(){return x};
J.glGetInteger=function(k){k=a.getParameter(k);return"number"===typeof k?k:0};J.glGetString=function(k){if(h)switch(k){case 7936:k=a.getParameter(37445);null==k&&(k=a.getParameter(7936));break;case 7937:k=a.getParameter(37446);null==k&&(k=a.getParameter(7937));break;default:k=a.getParameter(k)}else k=a.getParameter(k);return"string"===typeof k?k:null};switch(n){case 0:J.glGenVertexArrays=a.createVertexArray.bind(a);J.glDeleteVertexArrays=a.deleteVertexArray.bind(a);J.glBindVertexArray=a.bindVertexArray.bind(a);
break;case 1:J.glGenVertexArrays=d.createVertexArrayOES.bind(d);J.glDeleteVertexArrays=d.deleteVertexArrayOES.bind(d);J.glBindVertexArray=d.bindVertexArrayOES.bind(d);break;default:C(J,"glGenVertexArrays"),C(J,"glDeleteVertexArrays"),C(J,"glBindVertexArray")}switch(v){case 0:J.glVertexAttribDivisor=a.vertexAttribDivisor.bind(a);J.glDrawArraysInstanced=a.drawArraysInstanced.bind(a);J.glDrawElementsInstanced=a.drawElementsInstanced.bind(a);break;case 1:J.glVertexAttribDivisor=g.vertexAttribDivisorANGLE.bind(g);
J.glDrawArraysInstanced=g.drawArraysInstancedANGLE.bind(g);J.glDrawElementsInstanced=g.drawElementsInstancedANGLE.bind(g);break;default:C(J,"glVertexAttribDivisor"),C(J,"glDrawArraysInstanced"),C(J,"glDrawElementsInstanced")}};var Pc=!1;const Uc=new MessageChannel;var Vc=null;Uc.port2.addEventListener("message",function(){Vc()});async function Yb(){Uc.port1.start();Uc.port2.start();Vc=function(){Vc=null};Uc.port1.postMessage(0);Vc?await new Promise(function(a){setTimeout(function(){Vc?f("Immediate continue hack is not supported"):Pc=!0;a()},25)}):f("Immediate continue hack is not supported")}Da.getRootElement=function(){return Va};Da.getParentElement=function(){return P};Da.getCanvasElement=function(){return R};
Da.getEaglercraftXOpts=function(){return O};Da.getEventCount=nc.K.bind(nc);Da.getNextEvent=nc.j.bind(nc);
Da.queueAsyncDownload=function(a,b,c){try{fetch(a,{cache:b?"force-cache":"no-store",mode:"cors"}).then(function(d){return d.arrayBuffer()}).then(function(d){Z(1,0,{requestId:c,arrayBuffer:d})}).catch(function(d){f("Failed to complete async download: {}",a);ma("Exception Caught",d);Z(1,0,{requestId:c,arrayBuffer:null})})}catch(d){f("Failed to fetch: {}",a),ma("Exception Caught",d),Z(1,0,{requestId:c,arrayBuffer:null})}};
Da.download=new WebAssembly.Suspending(function(a,b){return new Promise(function(c){try{fetch(a,{cache:b?"force-cache":"no-store",mode:"cors"}).then(function(d){return d.arrayBuffer()}).then(function(d){c(d)}).catch(function(d){f("Failed to complete download: {}",a);ma("Exception Caught",d);c(null)})}catch(d){f("Failed to fetch: {}",a),ma("Exception Caught",d),c(null)}})});Da.writeCrashReport=function(a){rc(a,!1)};
Da.showContextLostScreen=function(a){if(!lb){lb=!0;var b=P||Va;if(b){var c=document.createElement("img"),d=document.createElement("div");c.setAttribute("style","z-index:100;position:absolute;top:10px;left:calc(50% - 151px);");c.src=Ra;d.setAttribute("style","z-index:100;position:absolute;top:135px;left:10%;right:10%;bottom:50px;background-color:white;border:1px solid #cccccc;overflow-x:hidden;overflow-y:scroll;font:18px sans-serif;padding:40px;");d.classList.add("_eaglercraftX_context_lost_element");
b.appendChild(c);b.appendChild(d);b.appendChild(pc());d.innerHTML='<h2><svg style="vertical-align:middle;margin:0px 16px 8px 8px;" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48" fill="none"><path stroke="#000000" stroke-width="3" stroke-linecap="square" d="M1.5 8.5v34h45v-28m-3-3h-10v-3m-3-3h-10m15 6h-18v-3m-3-3h-10"/><path stroke="#000000" stroke-width="2" stroke-linecap="square" d="M12 21h0m0 4h0m4 0h0m0-4h0m-2 2h0m20-2h0m0 4h0m4 0h0m0-4h0m-2 2h0"/><path stroke="#000000" stroke-width="2" stroke-linecap="square" d="M20 30h0 m2 2h0 m2 2h0 m2 2h0 m2 -2h0 m2 -2h0 m2 -2h0"/></svg> + WebGL context lost!</h2><div style="margin-left:40px;"><p style="font-size:1.2em;">Your browser has forcibly released all of the resources allocated by the game\'s 3D rendering context. EaglercraftX cannot continue, please refresh the page to restart the game, sorry for the inconvenience.</p><p style="font-size:1.2em;">This is not a bug, it is usually caused by the browser deciding it no longer has sufficient resources to continue rendering this page. If it happens again, try closing your other browser tabs and windows.</p><p style="font-size:1.2em;">If you\'re playing with vsync disabled, try enabling vsync to allow the browser to control the GPU usage more precisely.</p><p style="overflow-wrap:break-word;white-space:pre-wrap;font:0.75em monospace;margin-top:1.5em;" id="_eaglercraftX_contextLostTrace"></p></div>';
d.querySelector("#_eaglercraftX_contextLostTrace").appendChild(document.createTextNode(a))}else alert("WebGL context lost!"),f("WebGL context lost!")}};Da.steadyTimeMillis=performance.now.bind(performance);function Rc(a){return new Promise(function(b){setTimeout(b,a)})}Da.sleep=new WebAssembly.Suspending(Rc);function Wc(a){Pc?(Vc=a,Uc.port1.postMessage(0)):setTimeout(a,0)}function Qc(){return new Promise(Wc)}Da.immediateContinue=new WebAssembly.Suspending(Qc);Da.immediateContinueSupported=function(){return Pc};
Da.setCrashReportString=function(a,b){mb[a]=b};var Xc="undefined"!==typeof window,Yc=null;function Zc(){return new Promise(function(a){if("navigator"in window&&"mediaDevices"in window.navigator&&"getUserMedia"in window.navigator.mediaDevices)try{window.navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(b){a(b)}).catch(function(b){f("getUserMedia Error! (async)");ma("Exception Caught",b);a(null)})}catch(b){f("getUserMedia Error!"),a(null)}else f("No getUserMedia!"),a(null)})}
async function $c(){return Xc?null===Yc&&(Yc=await Zc(),null===Yc)?(Xc=!1,null):Yc:null}
function $b(){function a(b){const c=new Date;return b.replace("${date}",c.getFullYear()+"-"+("0"+(c.getMonth()+1)).slice(-2)+"-"+("0"+c.getDate()).slice(-2)+" "+("0"+c.getHours()).slice(-2)+"-"+("0"+c.getMinutes()).slice(-2)+"-"+("0"+c.getSeconds()).slice(-2))}Ea.getMic=new WebAssembly.Suspending($c);Ea.setDataAvailableHandler=function(b,c,d){const g=performance.now();b.addEventListener("dataavailable",function(m){if(c)ad(m.data,performance.now()-g|0,function(t){const D=URL.createObjectURL(t);Ac(a(d),
D,function(){URL.revokeObjectURL(D)})},{U:function(t){e(t)}});else{const t=URL.createObjectURL(m.data);Ac(a(d),t,function(){URL.revokeObjectURL(t)})}})}};function ac(){function a(g){try{const m=JSON.parse(g);this._peerConnection.setRemoteDescription(m).then(()=>{m.hasOwnProperty("type")&&"offer"===m.type&&this._peerConnection.createAnswer().then(t=>{this._peerConnection.setLocalDescription(t).then(()=>{Z(2,1,{objId:this.objId,data:JSON.stringify(t)})}).catch(D=>{f('Failed to set local description for "{}"! {}',this.objId,D.message);Z(2,3,{objId:this.objId})})}).catch(t=>{f('Failed to create answer for "{}"! {}',this.objId,t.message);Z(2,3,{objId:this.objId})})}).catch(t=>
{f('Failed to set remote description for "{}"! {}',this.objId,t.message);Z(2,3,{objId:this.objId})})}catch(m){f(m.message),Z(2,3,{objId:this.objId})}}function b(g){try{this._peerConnection.addIceCandidate(new RTCIceCandidate(JSON.parse(g))).catch(m=>{f('Failed to parse ice candidate for "{}"! {}',this.objId,m.message);Z(2,3,{objId:this.objId})})}catch(m){f(m.message),Z(2,3,{objId:this.objId})}}function c(){this._peerConnection.close()}Fa.isSupported=function(){return"undefined"!==typeof navigator.mediaDevices&&
"undefined"!==typeof navigator.mediaDevices.getUserMedia&&"srcObject"in HTMLAudioElement.prototype};let d=0;Fa.createRTCPeerConnection=function(g,m,t){try{const y=d++;var D;const z=new RTCPeerConnection({iceServers:JSON.parse(g),optional:[{DtlsSrtpKeyAgreement:!0}]});z.addEventListener("icecandidate",B=>{B.candidate&&Z(2,0,{objId:y,data:JSON.stringify({sdpMLineIndex:""+B.candidate.sdpMLineIndex,candidate:B.candidate.candidate})})});z.addEventListener("track",B=>{B=B.streams[0];D._aud=document.createElement("audio");
D._aud.autoplay=!0;D._aud.muted=!0;D._aud.srcObject=B;Z(2,2,{objId:y,stream:B})});t.getTracks().forEach(function(B){z.addTrack(B,t)});m&&z.createOffer().then(B=>{z.setLocalDescription(B).then(()=>{Z(2,1,{objId:y,data:JSON.stringify(B)})}).catch(G=>{f('Failed to set local description for "{}"! {}',y,G.message);Z(2,3,{objId:y})})}).catch(B=>{f('Failed to set create offer for "{}"! {}',y,B.message);Z(2,3,{objId:y})});z.addEventListener("connectionstatechange",()=>{const B=z.connectionState;"disconnected"!==
B&&"failed"!==B||Z(2,3,{objId:y})});return D={objId:y,_peerConnection:z,setRemoteDescription:a,addRemoteICECandidate:b,closeHandle:c}}catch(y){return f(y.message),null}}};function bc(){const a=new sa;let b;b={iceServers:[],g:null,h:null,readyState:1,v:null,description:null,D:!1,C:!0,disconnect:function(d){if(b.h){try{b.h.close()}catch(g){}b.h=null}if(b.g){try{b.g.close()}catch(g){}b.g=null}d||(b.C=!0);b.readyState=0}};N.supported=function(){return"undefined"!==typeof RTCPeerConnection};N.clientLANReadyState=function(){return b.readyState};N.clientLANCloseConnection=function(){b.disconnect(!1)};N.clientLANSendPacket=function(d){if(null!==b.h&&"open"===b.h.readyState)try{b.h.send(d)}catch(g){b.disconnect(!1)}else b.disconnect(!1)};
N.clientLANReadPacket=function(){const d=a.j();return d?new Uint8Array(d.data):null};N.clientLANAvailable=function(){return a.u};N.clientLANSetICEServersAndConnect=function(d){b.iceServers.length=0;for(let g of d)d=g.split(";"),1===d.length?b.iceServers.push({urls:d[0]}):3===d.length&&b.iceServers.push({urls:d[0],username:d[1],credential:d[2]});2!==b.readyState&&1!==b.readyState||b.disconnect(!0);try{if(b.h){try{b.h.close()}catch(g){}b.h=null}if(b.g)try{b.g.close()}catch(g){}b.g=new RTCPeerConnection({iceServers:b.iceServers,
optional:[{DtlsSrtpKeyAgreement:!0}]});b.readyState=1}catch(g){ma("Could not create LAN client RTCPeerConnection!",g);b.readyState=-2;return}try{const g=[];b.g.addEventListener("icecandidate",t=>{if(t.candidate){if(0===g.length){const D=[0,0],y=()=>{if(null!==b.g&&"disconnected"!==b.g.connectionState){const z=++D[1];D[0]!==g.length&&3>z?(D[0]=g.length,setTimeout(y,2E3)):(b.v=JSON.stringify(g),g.length=0)}};setTimeout(y,2E3)}g.push({sdpMLineIndex:t.candidate.sdpMLineIndex,candidate:t.candidate.candidate})}});
b.h=b.g.createDataChannel("lan");b.h.binaryType="arraybuffer";let m;m=()=>{0<g.length?setTimeout(m,10):(b.C=!1,b.D=!0)};b.h.addEventListener("open",m);b.h.addEventListener("message",t=>{a.push({data:t.data,_next:null})});b.g.createOffer().then(t=>{b.g.setLocalDescription(t).then(()=>{b.description=JSON.stringify(t)}).catch(D=>{f("Failed to set local description! {}",D.message);b.readyState=-1;b.disconnect(!1)})}).catch(t=>{f("Failed to set create offer! {}",t.message);b.readyState=-1;b.disconnect(!1)});
b.g.addEventListener("connectionstatechange",()=>{var t=b.g.connectionState;"disconnected"===t?b.disconnect(!1):"connected"===t?b.readyState=2:"failed"===t&&(b.readyState=-1,b.disconnect(!1))})}catch(g){if(b.h){try{b.h.close()}catch(m){}b.h=null}if(b.g){try{b.g.close()}catch(m){}b.g=null}ma("Could not create LAN client RTCDataChannel!",g);b.readyState=-2}};N.clearLANClientState=function(){b.v=b.description=null;b.D=!1;b.C=!0};N.clientLANAwaitICECandidate=function(){if(null===b.v)return null;const d=
b.v;b.v=null;return d};N.clientLANAwaitDescription=function(){if(null===b.description)return null;const d=b.description;b.description=null;return d};N.clientLANAwaitChannel=function(){return b.D?(b.D=!1,!0):!1};N.clientLANClosed=function(){return b.C};N.clientLANSetICECandidate=function(d){try{const g=JSON.parse(d);for(d=0;d<g.length;++d)b.g.addIceCandidate(new RTCIceCandidate(g[d]))}catch(g){ma("Uncaught exception setting remote ICE candidates",g),b.readyState=-1,b.disconnect(!1)}};N.clientLANSetDescription=
function(d){try{b.g.setRemoteDescription(JSON.parse(d))}catch(g){ma("Uncaught exception setting remote description",g),b.readyState=-1,b.disconnect(!1)}};let c;c={iceServers:[],A:new Map,F:new Map,disconnect:function(d){const g=c.A.get(d);if(g){c.A.delete(d);g.l&&c.F.delete(g.l);try{g.disconnect()}catch(m){}g.s(4,null)}}};N.serverLANInitializeServer=function(d){c.iceServers.length=0;for(let g of d)d=g.split(";"),1===d.length?c.iceServers.push({urls:d[0]}):3===d.length&&c.iceServers.push({urls:d[0],
username:d[1],credential:d[2]})};N.serverLANCloseServer=function(){for(let d of Object.values(c.A))if(d){try{d.disconnect()}catch(g){}d.s(4,null)}c.A.clear()};N.serverLANCreatePeer=function(d){try{const g=new sa;let m;m={i:d,g:new RTCPeerConnection({iceServers:c.iceServers,optional:[{DtlsSrtpKeyAgreement:!0}]}),h:null,l:null,s:function(y,z){g.push({type:y,data:z,_next:null})},disconnect:function(){m.h&&m.h.close();m.g.close()}};c.A.set(m.i,m);const t=[];m.g.addEventListener("icecandidate",y=>{if(y.candidate){if(0===
t.length){const z=[0,0],B=()=>{if(null!==m.g&&"disconnected"!==m.g.connectionState){const G=++z[1];z[0]!==t.length&&3>G?(z[0]=t.length,setTimeout(B,2E3)):(m.s(0,JSON.stringify(t)),t.length=0)}};setTimeout(B,2E3)}t.push({sdpMLineIndex:y.candidate.sdpMLineIndex,candidate:y.candidate.candidate})}});let D;D=y=>{0<t.length?setTimeout(D,10,y):y.channel&&(y=y.channel,null!==m.h?y.close():(m.h=y,m.s(2,null),m.h.addEventListener("message",z=>{z=z.data;m.l?kb(m.l,z):m.s(3,new Uint8Array(z))})))};m.g.addEventListener("datachannel",
D);m.g.addEventListener("connectionstatechange",()=>{const y=m.g.connectionState;"disconnected"!==y&&"failed"!==y||c.disconnect(m.i)});return{peerId:m.i,countAvailableEvents:function(){return g.u},nextEvent:function(){return g.j()},writePacket:function(y){let z=!1;if(null!==m.h&&"open"===m.h.readyState)try{m.h.send(y)}catch(B){z=!0}else z=!0;z&&c.disconnect(m.i)},handleRemoteICECandidates:function(y){try{const z=JSON.parse(y);for(let B of z)m.g.addIceCandidate(new RTCIceCandidate(B))}catch(z){f('Failed to parse ice candidate for "{}"! {}',
m.i,z.message),c.disconnect(m.i)}},handleRemoteDescription:function(y){try{const z=JSON.parse(y);m.g.setRemoteDescription(z).then(()=>{z.hasOwnProperty("type")&&"offer"===z.type&&m.g.createAnswer().then(B=>{m.g.setLocalDescription(B).then(()=>{m.s(1,JSON.stringify(B))}).catch(G=>{f('Failed to set local description for "{}"! {}',m.i,G.message);c.disconnect(m.i)})}).catch(B=>{f('Failed to create answer for "{}"! {}',m.i,B.message);c.disconnect(m.i)})}).catch(B=>{f('Failed to set remote description for "{}"! {}',
m.i,B.message);c.disconnect(m.i)})}catch(z){f('Failed to parse remote description for "{}"! {}',m.i,z.message),c.disconnect(m.i)}},mapIPC:function(y){m.l?y||(c.F.delete(m.l),m.l=null):y&&(m.l=y,c.F.set(y,m))},disconnect:function(){c.disconnect(m.i)}}}catch(g){return ma("Failed to create WebRTC LAN peer!",g),null}};jb=function(d,g){if(d=c.F.get(d)){let m=!1;if(d.h&&"open"===d.h.readyState)try{d.h.send(g)}catch(t){m=!0}else m=!0;m&&c.disconnect(d.i);return!0}return!1}};function cc(){function a(k,u){k.allow=u;return k.allow===u}function b(k,u){const w=k.sandbox;for(var E=0;E<u.length;++E)w.add(u[E]);for(E=0;E<u.length;++E)if(!w.contains(u[E]))return!1;for(E=0;E<w.length;++E)if(!u.find(K=>K===w[E]))return!1;return!0}function c(k){if(G)q=document.createElement("iframe"),q.allow="",q.referrerPolicy="strict-origin",q.sandbox.add("allow-downloads"),k.scriptEnabled&&(q.sandbox.add("allow-scripts"),q.sandbox.add("allow-pointer-lock"));else{q=document.createElement("iframe");
q.referrerPolicy="strict-origin";var u=["allow-downloads"];k.scriptEnabled&&(u.push("allow-scripts"),u.push("allow-pointer-lock"));if(!a(q,"")||!b(q,u)){f("Caught safety exception while opening webview!");null!==q&&(q.remove(),q=null);f("Things you can try:");f("1. Set window.eaglercraftXOpts.forceWebViewSupport to true");f("2. Set window.eaglercraftXOpts.enableWebViewCSP to false");f("(these settings may compromise security)");d();v.innerHTML='<div style="padding-top:13vh;"><h1 style="text-align:center;"><img width="48" height="48" style="vertical-align:middle;" src="'+
Sa+'">&emsp;IFrame Safety Error</h1><h4 style="text-align:center;">The content cannot be displayed safely!</h4><h4 style="text-align:center;">Check console for more details</h4></div>';return}}q.j=!0;q.o="lazy";u=!1;if(1===k.contentMode){if(W&&B)if("string"===typeof q.csp){var w="default-src 'none';",E=k.strictCSPEnable?"":L?" https:":" http: https:";w=k.scriptEnabled?w+(" script-src 'unsafe-eval' 'unsafe-inline' data: blob:"+E+"; style-src 'unsafe-eval' 'unsafe-inline' data: blob:")+(E+"; img-src data: blob:")+
(E+"; font-src data: blob:")+(E+"; child-src data: blob:")+(E+"; frame-src data: blob:; media-src data: mediastream: blob:")+(E+"; connect-src data: blob:")+(E+"; worker-src data: blob:")+(E+";"):w+(" style-src data: 'unsafe-inline'"+E+"; img-src data:")+(E+"; font-src data:")+(E+"; media-src data:")+(E+";");q.csp=w}else la("This browser does not support CSP attribute on iframes! (try Chrome)"),u=!0;else u=!0;u&&k.strictCSPEnable&&la("Strict CSP was requested for this webview, but that feature is not available!")}else u=
!0;q.style.border="none";q.style.backgroundColor="white";q.style.width="100%";q.style.height="100%";q.classList.add("_eaglercraftX_webview_iframe_element");n.appendChild(q);1===k.contentMode?(w=y.decode(k.blob),k.blob=null,q.srcdoc=w):q.src=k.uri;const K=h,Y=q;let U=!1;q.addEventListener("mouseover",function(){K!==h||Y!==q||U||(U=!0,q.contentWindow.focus())});q.addEventListener("mouseout",function(){K===h&&Y===q&&U&&(U=!1,window.focus())});k.scriptEnabled&&k.serverMessageAPIEnabled&&(x=function(X){if(K===
h&&Y===q&&X.source===Y.contentWindow){X=X.data;if("object"===typeof X&&1===X.ver&&"string"===typeof X.channel&&0<X.channel.length){if("boolean"===typeof X.open){Z(3,0,{eventType:X.open?0:1,channelName:X.channel});return}if("string"===typeof X.data){Z(3,1,{eventType:0,channelName:X.channel,eventData:X.data});return}if(X.data instanceof ArrayBuffer){Z(3,1,{eventType:1,channelName:X.channel,eventData:X.data});return}}la("WebView sent an invalid message!")}else la("Recieved message from on dead IFrame handler: (#{}) {}",
K,Y.src)});e('WebView is loading: "{}"',1===k.contentMode?"about:srcdoc":q.src);e("JavaScript: {}, Strict CSP: {}, Message API: {}",k.scriptEnabled,k.strictCSPEnable&&!u,k.serverMessageAPIEnabled)}function d(){null!==v&&(++h,v.remove(),v=null);v=document.createElement("div");v.style.backgroundColor="white";v.style.width="100%";v.style.height="100%";v.classList.add("_eaglercraftX_webview_permission_screen");n.appendChild(v)}function g(k){d();v.innerHTML='<div style="padding-top:13vh;"><div style="margin:auto;max-width:450px;border:6px double black;text-align:center;padding:20px;"><h2><img width="32" height="32" style="vertical-align:middle;" src="'+
Sa+'">&emsp;Allow JavaScript</h2><p style="font-family:monospace;text-decoration:underline;word-wrap:break-word;" class="_eaglercraftX_permission_target_url"></p><h4 style="line-height:1.4em;">Strict CSP: '+(1!==k.contentMode?'<span style="color:red;">Impossible</span>':B&&W?k.strictCSPEnable?'<span style="color:green;">Enabled</span>':'<span style="color:red;">Disabled</span>':'<span style="color:red;">Unsupported</span>')+"&ensp;|&ensp;Message API: "+(k.serverMessageAPIEnabled?'<span style="color:red;">Enabled</span>':
'<span style="color:green;">Disabled</span>')+'</h4><p><input class="_eaglercraftX_remember_javascript" type="checkbox" checked> Remember my choice</p><p><button style="font-size:1.5em;" class="_eaglercraftX_allow_javascript">Allow</button>&emsp;<button style="font-size:1.5em;" class="_eaglercraftX_block_javascript">Block</button></p></div></div>';const u=h;if(1!==k.contentMode){const w=k.url;v.querySelector("._eaglercraftX_permission_target_url").innerText=255<w.length()?w.substring(0,253)+"...":
w}v.querySelector("._eaglercraftX_allow_javascript").addEventListener("click",function(){if(h===u&&null!==v){const w=v.querySelector("._eaglercraftX_remember_javascript");null!==w&&w.checked&&Z(3,2,null);v.remove();v=null;++h;c(k)}});v.querySelector("._eaglercraftX_block_javascript").addEventListener("click",function(){if(h===u&&null!==v){const w=v.querySelector("._eaglercraftX_remember_javascript");null!==w&&w.checked&&Z(3,3,null);m(k)}})}function m(k){d();v.innerHTML='<div style="padding-top:13vh;"><h1 style="text-align:center;"><img width="48" height="48" style="vertical-align:middle;" src="'+
Sa+'">&emsp;Content Blocked</h1><h4 style="text-align:center;">You chose to block JavaScript execution for this embed</h4><p style="text-align:center;"><button style="font-size:1.0em;" class="_eaglercraftX_re_evaluate_javascript">Re-evaluate</button></p></div>';const u=h;v.querySelector("._eaglercraftX_re_evaluate_javascript").addEventListener("click",function(){h===u&&null!==v&&(Z(3,4,null),g(k))})}function t(k,u,w,E){if(n){const K=window.devicePixelRatio;n.style.top=""+u/K+"px";n.style.left=""+
k/K+"px";n.style.width=""+(w/K-10)+"px";n.style.height=""+(E/K-10)+"px"}}function D(){++h;q&&(q.remove(),q=null);x=null;v&&(v.remove(),v=null);n&&(n.remove(),n=null);window.focus()}const y=new TextDecoder("utf-8");var z=!1,B=!1,G=Ob,W=Pb;if(G)B=z=!0;else{B=z=!1;try{var ea=document.createElement("iframe");z=null!=ea&&"string"===typeof ea.allow&&"object"===typeof ea.sandbox;B=W&&z&&"string"===typeof ea.csp}catch(k){f("Error checking iframe support"),f(k)}}z?!B&&W&&la("This browser does not support CSP attribute on iframes! (try Chrome)"):
f("This browser does not meet the safety requirements for webview support, this feature will be disabled");const L=location.protocol&&"https:"===location.protocol.toLowerCase();var h=0,n=null,v=null,q=null,x=null;window.addEventListener("message",function(k){x&&k.source!==window&&x(k)});Ga.checkSupported=function(){return z};Ga.checkCSPSupported=function(){return B};Ga.sendStringMessage=function(k,u){try{var w;null!=q&&null!=(w=q.contentWindow)?w.postMessage({ver:1,channel:k,type:"string",data:u},
"*"):f("Server tried to send the WebView a message, but the message channel is not open!")}catch(E){ma("Failed to send string message to WebView!",E)}};Ga.sendBinaryMessage=function(k,u,w){try{var E;null!=q&&null!=(E=q.contentWindow)?E.postMessage({ver:1,channel:k,type:"binary",data:V.slice(u,u+w)},"*"):f("Server tried to send the WebView a message, but the message channel is not open!")}catch(K){ma("Failed to send string message to WebView!",K)}};Ga.beginShowing=function(k,u,w,E,K,Y){if(z)try{switch(null!==
n&&D(),n=document.createElement("div"),n.classList.add("_eaglercraftX_webview_container_element"),n.style.border="5px solid #333333",n.style.zIndex="11",n.style.position="absolute",n.style.backgroundColor="#DDDDDD",n.style.fontFamily="sans-serif",t(w,E,K,Y),P.appendChild(n),k){case 0:c(u);break;case 1:if(1===u.contentMode){const U=new Uint8Array(u.blob.length);U.set(u.blob,0);u.blob=U}g(u);break;case 2:if(1===u.contentMode){const U=new Uint8Array(u.blob.length);U.set(u.blob,0);u.blob=U}m(u)}}catch(U){ma("Failed to begin showing WebView!",
U)}};Ga.resize=t;Ga.endShowing=D};var Sc=null,Tc=!1;
function dc(){var a=null;const b=new sa;var c=null;Ja.startIntegratedServer=new WebAssembly.Suspending(async function(){c||=URL.createObjectURL(new Blob(['"use strict"; (function(ctx, globals) {globals.__eaglerXOnMessage = function(o) {globals.__eaglerXOnMessage = function(oo) { console.error("Dropped IPC packet that was sent too early!"); };const eagRuntimeJSURL = URL.createObjectURL(new Blob([ o.eagruntimeJS ], { type: "text/javascript;charset=utf-8" }));ctx.getEaglercraftXOpts = function() { return o.eaglercraftXOpts; };ctx.getEagRuntimeJSURL = function() { return eagRuntimeJSURL; };ctx.getClassesWASMURL = function() { return o.classesWASM; };ctx.getClassesDeobfWASMURL = function() { return o.classesDeobfWASM; };ctx.getClassesTEADBGURL = function() { return o.classesTEADBG; };ctx.getEPKFiles = function() { return null; };ctx.getRootElement = function() { return null; };ctx.getMainArgs = function() { return ["_worker_process_"]; };ctx.getImageURL = function(idx) { return null; };ctx.runMain = function(mainFunc) { mainFunc(); };importScripts(eagRuntimeJSURL);};addEventListener("message", function(evt) { globals.__eaglerXOnMessage(evt.data); });})(self.__eaglercraftXLoaderContext = {}, self);'],{type:"text/javascript;charset=utf8"}));
try{a=new Worker(c)}catch(t){return ma("Failed to create worker",t),!1}a.addEventListener("error",function(t){ma("Worker Error",t.error)});a.addEventListener("message",function(t){const D=t.data.ch;D?"~!LOGGER"===D?Xb(t.data.txt,t.data.err):(t=t.data.dat)?jb(D,t)||b.push({ch:D,data:new Uint8Array(t),_next:null}):f("Recieved IPC packet with null buffer"):f("Recieved IPC packet with null channel")});const d=[];var g=null;Na&&(g=Na.buffer.slice(Na.byteOffset,Na.byteOffset+Na.byteLength),d.push(g));try{var m=
await fetch(Ta,{cache:"force-cache"}).then(t=>t.arrayBuffer())}catch(t){ma("Failed to fetch eagruntime.js contents",t);try{a.terminate()}catch(D){}return!1}d.push(m);a.postMessage({eaglercraftXOpts:O,eagruntimeJS:m,classesWASM:La,classesDeobfWASM:Ma,classesTEADBG:g},d);return!0});Ja.sendPacket=function(d,g,m){a&&(g=V.slice(g,g+m),a.postMessage({ch:d,dat:g},[g]))};kb=function(d,g){a&&a.postMessage({ch:d,dat:g},[g])};Ja.getAvailablePackets=b.K.bind(b);Ja.getNextPacket=b.j.bind(b);Ja.killWorker=function(){a&&
(a.terminate(),a=null)};Ja.showCrashReportOverlay=function(d,g,m,t,D){Sc||(Sc=document.createElement("div"),Sc.setAttribute("style","z-index:99;position:absolute;background-color:black;color:white;overflow-x:hidden;overflow-y:scroll;overflow-wrap:break-word;white-space:pre-wrap;font:18px sans-serif;padding:20px;display:none;"),Sc.classList.add("_eaglercraftX_integratedserver_crash_element"),P.appendChild(Sc));Sc.innerText="";Sc.innerText="CURRENT DATE: "+(new Date).toLocaleString()+"\n\n"+d;d=window.devicePixelRatio;
Sc.style.top=""+m/d+"px";Sc.style.left=""+g/d+"px";Sc.style.width=""+(t/d-20)+"px";Sc.style.height=""+(D/d-20)+"px";Sc.style.display="block";Tc=!0};Ja.hideCrashReportOverlay=function(){Sc&&(Sc.style.display="none");Tc=!1};window.__curEaglerX188UnloadListenerCB=function(){a&&a.postMessage({ch:"~!WASM_AUTOSAVE"})}};var sc=null,bd=!1;
function kc(){const a=new sa;self.__eaglerXOnMessage=function(b){const c=b.ch;b=b.dat;c?"~!WASM_AUTOSAVE"===c?bd=!0:b?a.push({ch:c,data:new Uint8Array(b),_next:null}):f("Recieved IPC packet with null buffer"):f("Recieved IPC packet with null channel")};Ka.sendPacket=function(b,c,d){c=V.slice(c,c+d);postMessage({ch:b,dat:c},[c])};Ka.getAvailablePackets=a.K.bind(a);Ka.getNextPacket=a.j.bind(a);Ka.setCrashCallback=function(){return{call:function(b){sc=b}}};Ka.isTabAboutToClose=function(){const b=bd;
bd=!1;return b}};ta.getByteBufferView=function(a,b){return new Int8Array(V,a,b)};ta.getUnsignedByteBufferView=function(a,b){return new Uint8Array(V,a,b)};ta.getUnsignedClampedByteBufferView=function(a,b){return new Uint8ClampedArray(V,a,b)};ta.getShortBufferView=function(a,b){return new Int16Array(V,a,b)};ta.getUnsignedShortBufferView=function(a,b){return new Uint16Array(V,a,b)};ta.getIntBufferView=function(a,b){return new Int32Array(V,a,b)};ta.getFloatBufferView=function(a,b){return new Float32Array(V,a,b)};
ta.setHeapViewCallback=function(a){hb=a;mc()};const cd={172351395:{name:"EBML",type:"Container"},646:{name:"EBMLVersion",type:"Uint"},759:{name:"EBMLReadVersion",type:"Uint"},754:{name:"EBMLMaxIDLength",type:"Uint"},755:{name:"EBMLMaxSizeLength",type:"Uint"},642:{name:"DocType",type:"String"},647:{name:"DocTypeVersion",type:"Uint"},645:{name:"DocTypeReadVersion",type:"Uint"},108:{name:"Void",type:"Binary"},63:{name:"CRC-32",type:"Binary"},190023271:{name:"SignatureSlot",type:"Container"},16010:{name:"SignatureAlgo",type:"Uint"},16026:{name:"SignatureHash",
type:"Uint"},16037:{name:"SignaturePublicKey",type:"Binary"},16053:{name:"Signature",type:"Binary"},15963:{name:"SignatureElements",type:"Container"},15995:{name:"SignatureElementList",type:"Container"},9522:{name:"SignedElement",type:"Binary"},139690087:{name:"Segment",type:"Container"},21863284:{name:"SeekHead",type:"Container"},3515:{name:"Seek",type:"Container"},5035:{name:"SeekID",type:"Binary"},5036:{name:"SeekPosition",type:"Uint"},88713574:{name:"Info",type:"Container"},13220:{name:"SegmentUID",
type:"Binary"},13188:{name:"SegmentFilename",type:"String"},1882403:{name:"PrevUID",type:"Binary"},1868715:{name:"PrevFilename",type:"String"},2013475:{name:"NextUID",type:"Binary"},1999803:{name:"NextFilename",type:"String"},1092:{name:"SegmentFamily",type:"Binary"},10532:{name:"ChapterTranslate",type:"Container"},10748:{name:"ChapterTranslateEditionUID",type:"Uint"},10687:{name:"ChapterTranslateCodec",type:"Uint"},10661:{name:"ChapterTranslateID",type:"Binary"},710577:{name:"TimecodeScale",type:"Uint"},
1161:{name:"Duration",type:"Float"},1121:{name:"DateUTC",type:"Date"},15273:{name:"Title",type:"String"},3456:{name:"MuxingApp",type:"String"},5953:{name:"WritingApp",type:"String"},103:{name:"Timecode",type:"Uint"},6228:{name:"SilentTracks",type:"Container"},6359:{name:"SilentTrackNumber",type:"Uint"},39:{name:"Position",type:"Uint"},43:{name:"PrevSize",type:"Uint"},35:{name:"SimpleBlock",type:"Binary"},32:{name:"BlockGroup",type:"Container"},33:{name:"Block",type:"Binary"},34:{name:"BlockVirtual",
type:"Binary"},13729:{name:"BlockAdditions",type:"Container"},38:{name:"BlockMore",type:"Container"},110:{name:"BlockAddID",type:"Uint"},37:{name:"BlockAdditional",type:"Binary"},27:{name:"BlockDuration",type:"Uint"},122:{name:"ReferencePriority",type:"Uint"},123:{name:"ReferenceBlock",type:"Int"},125:{name:"ReferenceVirtual",type:"Int"},36:{name:"CodecState",type:"Binary"},13730:{name:"DiscardPadding",type:"Int"},14:{name:"Slices",type:"Container"},104:{name:"TimeSlice",type:"Container"},76:{name:"LaceNumber",
type:"Uint"},77:{name:"FrameNumber",type:"Uint"},75:{name:"BlockAdditionID",type:"Uint"},78:{name:"Delay",type:"Uint"},79:{name:"SliceDuration",type:"Uint"},72:{name:"ReferenceFrame",type:"Container"},73:{name:"ReferenceOffset",type:"Uint"},74:{name:"ReferenceTimeCode",type:"Uint"},47:{name:"EncryptedBlock",type:"Binary"},106212971:{name:"Tracks",type:"Container"},46:{name:"TrackEntry",type:"Container"},87:{name:"TrackNumber",type:"Uint"},13253:{name:"TrackUID",type:"Uint"},3:{name:"TrackType",type:"Uint"},
57:{name:"FlagEnabled",type:"Uint"},8:{name:"FlagDefault",type:"Uint"},5546:{name:"FlagForced",type:"Uint"},28:{name:"FlagLacing",type:"Uint"},11751:{name:"MinCache",type:"Uint"},11768:{name:"MaxCache",type:"Uint"},254851:{name:"DefaultDuration",type:"Uint"},216698:{name:"DefaultDecodedFieldDuration",type:"Uint"},209231:{name:"TrackTimecodeScale",type:"Float"},4991:{name:"TrackOffset",type:"Int"},5614:{name:"MaxBlockAdditionID",type:"Uint"},4974:{name:"Name",type:"String"},177564:{name:"Language",
type:"String"},6:{name:"CodecID",type:"String"},9122:{name:"CodecPrivate",type:"Binary"},362120:{name:"CodecName",type:"String"},13382:{name:"AttachmentLink",type:"Uint"},1742487:{name:"CodecSettings",type:"String"},1785920:{name:"CodecInfoURL",type:"String"},438848:{name:"CodecDownloadURL",type:"String"},42:{name:"CodecDecodeAll",type:"Uint"},12203:{name:"TrackOverlay",type:"Uint"},5802:{name:"CodecDelay",type:"Uint"},5819:{name:"SeekPreRoll",type:"Uint"},9764:{name:"TrackTranslate",type:"Container"},
9980:{name:"TrackTranslateEditionUID",type:"Uint"},9919:{name:"TrackTranslateCodec",type:"Uint"},9893:{name:"TrackTranslateTrackID",type:"Binary"},96:{name:"Video",type:"Container"},26:{name:"FlagInterlaced",type:"Uint"},5048:{name:"StereoMode",type:"Uint"},5056:{name:"AlphaMode",type:"Uint"},5049:{name:"OldStereoMode",type:"Uint"},48:{name:"PixelWidth",type:"Uint"},58:{name:"PixelHeight",type:"Uint"},5290:{name:"PixelCropBottom",type:"Uint"},5307:{name:"PixelCropTop",type:"Uint"},5324:{name:"PixelCropLeft",
type:"Uint"},5341:{name:"PixelCropRight",type:"Uint"},5296:{name:"DisplayWidth",type:"Uint"},5306:{name:"DisplayHeight",type:"Uint"},5298:{name:"DisplayUnit",type:"Uint"},5299:{name:"AspectRatioType",type:"Uint"},963876:{name:"ColourSpace",type:"Binary"},1029411:{name:"GammaValue",type:"Float"},230371:{name:"FrameRate",type:"Float"},97:{name:"Audio",type:"Container"},53:{name:"SamplingFrequency",type:"Float"},14517:{name:"OutputSamplingFrequency",type:"Float"},31:{name:"Channels",type:"Uint"},15739:{name:"ChannelPositions",
type:"Binary"},8804:{name:"BitDepth",type:"Uint"},98:{name:"TrackOperation",type:"Container"},99:{name:"TrackCombinePlanes",type:"Container"},100:{name:"TrackPlane",type:"Container"},101:{name:"TrackPlaneUID",type:"Uint"},102:{name:"TrackPlaneType",type:"Uint"},105:{name:"TrackJoinBlocks",type:"Container"},109:{name:"TrackJoinUID",type:"Uint"},64:{name:"TrickTrackUID",type:"Uint"},65:{name:"TrickTrackSegmentUID",type:"Binary"},70:{name:"TrickTrackFlag",type:"Uint"},71:{name:"TrickMasterTrackUID",
type:"Uint"},68:{name:"TrickMasterTrackSegmentUID",type:"Binary"},11648:{name:"ContentEncodings",type:"Container"},8768:{name:"ContentEncoding",type:"Container"},4145:{name:"ContentEncodingOrder",type:"Uint"},4146:{name:"ContentEncodingScope",type:"Uint"},4147:{name:"ContentEncodingType",type:"Uint"},4148:{name:"ContentCompression",type:"Container"},596:{name:"ContentCompAlgo",type:"Uint"},597:{name:"ContentCompSettings",type:"Binary"},4149:{name:"ContentEncryption",type:"Container"},2017:{name:"ContentEncAlgo",
type:"Uint"},2018:{name:"ContentEncKeyID",type:"Binary"},2019:{name:"ContentSignature",type:"Binary"},2020:{name:"ContentSigKeyID",type:"Binary"},2021:{name:"ContentSigAlgo",type:"Uint"},2022:{name:"ContentSigHashAlgo",type:"Uint"},206814059:{name:"Cues",type:"Container"},59:{name:"CuePoint",type:"Container"},51:{name:"CueTime",type:"Uint"},55:{name:"CueTrackPositions",type:"Container"},119:{name:"CueTrack",type:"Uint"},113:{name:"CueClusterPosition",type:"Uint"},112:{name:"CueRelativePosition",type:"Uint"},
50:{name:"CueDuration",type:"Uint"},4984:{name:"CueBlockNumber",type:"Uint"},106:{name:"CueCodecState",type:"Uint"},91:{name:"CueReference",type:"Container"},22:{name:"CueRefTime",type:"Uint"},23:{name:"CueRefCluster",type:"Uint"},4959:{name:"CueRefNumber",type:"Uint"},107:{name:"CueRefCodecState",type:"Uint"},155296873:{name:"Attachments",type:"Container"},8615:{name:"AttachedFile",type:"Container"},1662:{name:"FileDescription",type:"String"},1646:{name:"FileName",type:"String"},1632:{name:"FileMimeType",
type:"String"},1628:{name:"FileData",type:"Binary"},1710:{name:"FileUID",type:"Uint"},1653:{name:"FileReferral",type:"Binary"},1633:{name:"FileUsedStartTime",type:"Uint"},1634:{name:"FileUsedEndTime",type:"Uint"},4433776:{name:"Chapters",type:"Container"},1465:{name:"EditionEntry",type:"Container"},1468:{name:"EditionUID",type:"Uint"},1469:{name:"EditionFlagHidden",type:"Uint"},1499:{name:"EditionFlagDefault",type:"Uint"},1501:{name:"EditionFlagOrdered",type:"Uint"},54:{name:"ChapterAtom",type:"Container"},
13252:{name:"ChapterUID",type:"Uint"},5716:{name:"ChapterStringUID",type:"String"},17:{name:"ChapterTimeStart",type:"Uint"},18:{name:"ChapterTimeEnd",type:"Uint"},24:{name:"ChapterFlagHidden",type:"Uint"},1432:{name:"ChapterFlagEnabled",type:"Uint"},11879:{name:"ChapterSegmentUID",type:"Binary"},11964:{name:"ChapterSegmentEditionUID",type:"Uint"},9155:{name:"ChapterPhysicalEquiv",type:"Uint"},15:{name:"ChapterTrack",type:"Container"},9:{name:"ChapterTrackNumber",type:"Uint"},0:{name:"ChapterDisplay",
type:"Container"},5:{name:"ChapString",type:"String"},892:{name:"ChapLanguage",type:"String"},894:{name:"ChapCountry",type:"String"},10564:{name:"ChapProcess",type:"Container"},10581:{name:"ChapProcessCodecID",type:"Uint"},1293:{name:"ChapProcessPrivate",type:"Binary"},10513:{name:"ChapProcessCommand",type:"Container"},10530:{name:"ChapProcessTime",type:"Uint"},10547:{name:"ChapProcessData",type:"Binary"},39109479:{name:"Tags",type:"Container"},13171:{name:"Tag",type:"Container"},9152:{name:"Targets",
type:"Container"},10442:{name:"TargetTypeValue",type:"Uint"},9162:{name:"TargetType",type:"String"},9157:{name:"TagTrackUID",type:"Uint"},9161:{name:"TagEditionUID",type:"Uint"},9156:{name:"TagChapterUID",type:"Uint"},9158:{name:"TagAttachmentUID",type:"Uint"},10184:{name:"SimpleTag",type:"Container"},1443:{name:"TagName",type:"String"},1146:{name:"TagLanguage",type:"String"},1156:{name:"TagDefault",type:"Uint"},1159:{name:"TagString",type:"String"},1157:{name:"TagBinary",type:"Binary"}};
function dd(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function ed(a,b){this.name=a||"Unknown";this.type=b||"Unknown"}ed.prototype.j=function(){};ed.prototype.m=function(){};function fd(a,b){ed.call(this,a,b||"Uint")}dd(fd,ed);fd.prototype.j=function(){this.data="";for(var a=0;a<this.source.length;a++){var b=this.source[a].toString(16);this.data+=1===b.length%2?"0"+b:b}};
fd.prototype.m=function(){var a=this.data.length/2;this.source=new Uint8Array(a);for(var b=0;b<a;b++)this.source[b]=parseInt(this.data.substr(2*b,2),16)};fd.prototype.L=function(){return parseInt(this.data,16)};fd.prototype.H=function(a){a=a.toString(16);this.data=1===a.length%2?"0"+a:a;this.m()};function gd(a,b){ed.call(this,a,b||"Float")}dd(gd,ed);gd.prototype.j=function(){var a=this.source.reverse();this.data=(new (this.source&&4===this.source.length?Float32Array:Float64Array)(a.buffer))[0]};
gd.prototype.m=function(){var a=new (this.source&&4===this.source.length?Float32Array:Float64Array)([this.data]);this.source=(new Uint8Array(a.buffer)).reverse()};gd.prototype.L=function(){return this.data};gd.prototype.H=function(a){this.data=a;this.m()};function hd(a,b){ed.call(this,a,b||"Container")}dd(hd,ed);function id(a){var b=a.source[a.offset++],c=8-b.toString(2).length;b-=1<<7-c;for(var d=0;d<c;d++)b*=256,b+=a.source[a.offset++];return b}
hd.prototype.j=function(){this.data=[];for(this.offset=0;this.offset<this.source.length;this.offset=b){var a=id(this);var b=id(this);b=Math.min(this.offset+b,this.source.length);var c=this.source.slice(this.offset,b),d=cd[a]||{name:"Unknown",type:"Unknown"},g=ed;switch(d.type){case "Container":g=hd;break;case "Uint":g=fd;break;case "Float":g=gd}g=d=new g(d.name,d.type);g.source=c;g.j();this.data.push({id:a,aa:a.toString(16),data:d})}};
function jd(a,b,c){for(var d=1,g=128;b>=g&&8>d;d++,g*=128);if(!c)for(b=g+b,c=d-1;0<=c;c--)g=b%256,a.source[a.offset+c]=g,b=(b-g)/256;a.offset+=d}function kd(a,b){for(var c=a.offset=0;c<a.data.length;c++){var d=a.data[c],g=d.data.source,m=g.length;jd(a,d.id,b);jd(a,m,b);b||a.source.set(g,a.offset);a.offset+=m}return a.offset}hd.prototype.m=function(){var a=kd(this,"draft");this.source=new Uint8Array(a);kd(this,null)};
function ld(a,b){for(var c=0;c<a.data.length;c++){var d=a.data[c];if(d.id===b)return d.data}return null}function md(a){hd.call(this,"File","File");this.source=a;this.j()}dd(md,hd);
function nd(a,b,c){c=c&&c.U;void 0===c?c=function(D){console.log(D)}:c||=function(){};var d=ld(a,139690087);if(!d)return c("[fix-webm-duration] Segment section is missing"),!1;var g=ld(d,88713574);if(!g)return c("[fix-webm-duration] Info section is missing"),!1;var m=ld(g,710577);if(!m)return c("[fix-webm-duration] TimecodeScale section is missing"),!1;var t=ld(g,1161);if(t)if(0>=t.L())c("[fix-webm-duration] Duration section is present, but the value is empty"),t.H(b);else return c("[fix-webm-duration] Duration section is present"),
!1;else c("[fix-webm-duration] Duration section is missing"),t=new gd("Duration","Float"),t.H(b),g.data.push({id:1161,data:t});m.H(1E6);g.m();d.m();a.m();return!0}function ad(a,b,c,d){try{var g=new FileReader;g.onloadend=function(){try{var m=new md(new Uint8Array(g.result));nd(m,b,d)&&(a=new Blob([m.source.buffer],{type:a.type||"video/webm"}))}catch(t){}c(a)};g.readAsArrayBuffer(a)}catch(m){c(a)}};var od;
(function(){function a(h){let n=B.get(h);"undefined"===typeof n&&(n=new Function("return "+h+";"),B.set(h,n));return n()}function b(h,n){let v={exports:null,Z:n,B:null,I:null};c(h);d(h);g(h,v);m(h,v);h.teavmMath=Math;return{O(q){v.exports=q},Y(q){v.B=q},X(q){v.I=q}}}function c(h){h.teavmDate={currentTimeMillis:()=>(new Date).getTime(),dateToString:n=>(new Date(n)).toString(),getYear:n=>(new Date(n)).getFullYear(),setYear:(n,v)=>{n=new Date(n);n.setFullYear(v);return n.getTime()},getMonth:n=>(new Date(n)).getMonth(),
setMonth:(n,v)=>{n=new Date(n);n.setMonth(v);return n.getTime()},getDate:n=>(new Date(n)).getDate(),setDate:(n,v)=>{n=new Date(n);n.setDate(v);return n.getTime()},create:(n,v,q,x,k,u)=>(new Date(n,v,q,x,k,u)).getTime(),createFromUTC:(n,v,q,x,k,u)=>Date.UTC(n,v,q,x,k,u)}}function d(h){let n=[],v=[];h.teavmConsole={putcharStderr:function(q){10===q?(q=String.fromCharCode(...n),console.error(q),ia&&ia(q,!0),n.length=0):n.push(q)},putcharStdout:function(q){10===q?(q=String.fromCharCode(...v),console.log(q),
ia&&ia(q,!1),v.length=0):v.push(q)}}}function g(h,n){let v=new FinalizationRegistry(x=>{let k=n.exports["teavm.reportGarbageCollectedValue"];"undefined"!==typeof k&&n.I(function(){k(x.V,x.W)})}),q=new FinalizationRegistry(x=>{let k=n.exports["teavm.reportGarbageCollectedString"];"function"===typeof k&&n.I(function(){k(x)})});h.teavm={createWeakRef:(x,k,u)=>{null!==u&&v.register(x,{W:k,V:u});return new WeakRef(x)},deref:x=>{x=x.deref();return void 0!==x?x:null},createStringWeakRef:(x,k)=>{q.register(x,
k);return new WeakRef(x)},stringDeref:x=>x.deref(),takeStackTrace:()=>{var x=Error().stack;let k=[];for(let u of x.split("\n"))x=G.exec(u),null!==x&&2<=x.length&&k.push(parseInt(x[1],16));return{getStack:function(){let u;if(n.B)try{u=n.B(k)}catch(w){console.warn("Could not deobfuscate stack",w)}u||=k.map(w=>({className:"java.lang.Throwable$FakeClass",method:"fakeMethod",file:"Throwable.java",line:w}));return u}}},decorateException:x=>{new ea(n,x)},linearMemory:()=>n.exports["teavm.memory"].buffer,
notifyHeapResized:()=>{}}}function m(h,n){function v(p){return p}function q(p){var r=p.charAt(0);var F=""+(x(r)?r:"_");for(r=1;r<p.length;++r){let S=p.charAt(r);var M=S;M=x(M)||"0"<=M&&"9">=M;F+=M?S:"_"}return F}function x(p){return"A"<=p&&"Z">=p||"a"<=p&&"z">=p||"_"===p||"$"===p}function k(p,r,F){null===p?(new Function("value",r+" = value;"))(F):p[r]=F}function u(p){n.exports["teavm.js.throwException"](W in p?p[W]:n.exports["teavm.js.wrapException"](p))}function w(p){a:{if(p instanceof WebAssembly.Exception){var r=
n.exports["teavm.javaException"];var F=n.exports["teavm.getJsException"];if(p.is(r)){p=p.getArg(r,0);r=n.exports["teavm.js.extractException"](p);if(null!==r){F=r;break a}F=F(p);"undefined"===typeof F&&(F=new ea(n,p));break a}}F=p}throw F;}function E(p){var r=[];for(let F=0;F<p.length;++F)r.push("p"+F);r=0===r.length?"":r.join(", ");r=(new Function("rethrowJavaAsJs","fn",`return function(${r}) {\n`+"    try {\n"+`        return fn(${r});\n`+"    } catch (e) {\n        rethrowJavaAsJs(e);\n    }\n};"))(w,
p);r.__impl=p;r.__rethrow=w;return r}function K(p,r){return(new Function("constructor",`return function ${p}(marker, javaObject) {\n`+"    return constructor.call(this, marker, javaObject);\n}\n"))(r)}function Y(p){try{return p()}catch(r){u(r)}}let U=Symbol("javaObject"),X=Symbol("functions"),eb=Symbol("functionOrigin"),Ha=Symbol("wrapperCallMarker"),Ba=new WeakMap,Ca=new WeakMap,xa=new Map,fb=new FinalizationRegistry(p=>xa.delete(p)),ua=new WeakMap,Ia=2463534242;h.teavmJso={stringBuiltinsSupported:()=>
{if(null===L){let p=new Int8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,2,23,1,14,119,97,115,109,58,106,115,45,115,116,114,105,110,103,4,99,97,115,116,0,0,3,1,0,5,4,1,1,0,0,10,-127,-128,-128,0,0]);L=!WebAssembly.validate(p,{builtins:["js-string"]})}return L},isUndefined:p=>"undefined"===typeof p,emptyArray:()=>[],appendToArray:(p,r)=>p.push(r),unwrapBoolean:p=>p?1:0,wrapBoolean:p=>!!p,getProperty:function(p,r){try{return null!==p?p[r]:a(r)}catch(F){u(F)}},setProperty:k,setPropertyPure:k,global:p=>{try{return a(p)}catch(r){u(r)}},
createClass:(p,r,F)=>{p=q(p||"JavaObject");let M;M=null===r?function(ca){this[U]=ca;this[X]=null}:function(ca){r.call(this,ca)};let S=K(p,function(ca,va){if(ca===Ha)M.call(this,va);else{if(null===F)throw Error("This class can't be instantiated directly");try{return F.apply(null,arguments)}catch(Ua){w(Ua)}}});S.prototype=Object.create(r||Object.prototype);S.prototype.constructor=S;p=K(p,function(ca){return S.call(this,Ha,ca)});p[Ha]=S;p.prototype=S.prototype;return p},exportClass:p=>p[Ha],defineMethod:(p,
r,F)=>{let M=[];for(let S=1;S<F.length;++S)M.push("p"+S);p.prototype[r]=(new Function("rethrowJavaAsJs","fn",`return function(${0===M.length?"":M.join(", ")}) {\n`+"    try {\n"+`        return fn(${["this",M].join(", ")});\n`+"    } catch (e) {\n        rethrowJavaAsJs(e);\n    }\n};"))(w,F)},defineStaticMethod:(p,r,F)=>{p[r]=E(F)},defineFunction:E,defineProperty:(p,r,F,M)=>{let S={get(){try{return F(this)}catch(ca){w(ca)}}};null!==M&&(S.set=function(ca){try{M(this,ca)}catch(va){w(va)}});Object.defineProperty(p.prototype,
r,S)},defineStaticProperty:(p,r,F,M)=>{let S={get(){try{return F()}catch(ca){w(ca)}}};null!==M&&(S.set=function(ca){try{M(ca)}catch(va){w(va)}});Object.defineProperty(p,r,S)},javaObjectToJS:(p,r)=>{if(null===p)return null;var F=Ba.get(p);if("undefined"!=typeof F&&(F=F.deref(),"undefined"!==typeof F))return F;r=new r(p);Ba.set(p,new WeakRef(r));return r},unwrapJavaObject:p=>p[U],asFunction:(p,r)=>{let F=p[X];null===F&&(F=Object.create(null),p[X]=F);let M=F[r];"function"!==typeof M&&(M=function(){return p[r].apply(p,
arguments)},M[eb]=p,F[r]=M);return M},functionAsObject:(p,r)=>{let F=p[eb];if("undefined"!==typeof F){let M=F[X];if(void 0!==M&&M[r]===p)return F}return{[r]:function(...M){try{return p(...M)}catch(S){w(S)}}}},wrapObject:p=>{if(null===p)return null;if("object"===typeof p||"function"===typeof p){var r=p[U];if("object"===typeof r)return r;r=Ca.get(p);if(void 0!==r&&(r=r.deref(),void 0!==r))return r;r=n.exports["teavm.jso.createWrapper"](p);Ca.set(p,new WeakRef(r));return r}r=xa.get(p);if(void 0!==r&&
(r=r.deref(),void 0!==r))return r;r=n.exports["teavm.jso.createWrapper"](p);xa.set(p,new WeakRef(r));fb.register(r,p);return r},isPrimitive:(p,r)=>typeof p===r,instanceOf:(p,r)=>p instanceof r,instanceOfOrNull:(p,r)=>null===p||p instanceof r,sameRef:(p,r)=>p===r,hashCode:p=>{if("object"===typeof p||"function"===typeof p||"symbol"===typeof p){var r=ua.get(p);if("number"===typeof r)return r;r=Ia;r^=r<<13;r^=r>>>17;Ia=r^=r<<5;ua.set(p,r);return r}return"number"===typeof p?p|0:"bigint"===typeof p?BigInt.asIntN(32,
p):"boolean"===typeof p?p?1:0:0},apply:(p,r,F)=>{try{return null===p?a(r)(...F):p[r](...F)}catch(M){u(M)}},concatArray:(p,r)=>[...p,...r],getJavaException:p=>p[W],getJSException:p=>(0,n.exports["teavm.getJsException"])(p),jsExports:()=>n.Z};for(var fa of"wrapByte wrapShort wrapChar wrapInt wrapLong wrapFloat wrapDouble unwrapByte unwrapShort unwrapChar unwrapInt unwrapLong unwrapFloat unwrapDouble".split(" "))h.teavmJso[fa]=v;fa=[];for(let p=0;32>p;++p){let r=0===fa.length?"":fa.join(", "),F=[...fa,
"body"].join(", ");h.teavmJso["createFunction"+p]=(new Function("wrapCallFromJavaToJs",...fa,"body",`return new Function('wrapCallFromJavaToJs', ${F}).bind(this, wrapCallFromJavaToJs);`)).bind(null,Y);h.teavmJso["bindFunction"+p]=(M,...S)=>M.bind(null,...S);h.teavmJso["callFunction"+p]=(new Function("rethrowJsAsJava","fn",...fa,"try {\n"+`    return fn(${r});\n`+"} catch (e) {\n    rethrowJsAsJava(e);\n}")).bind(null,u);h.teavmJso["callMethod"+p]=(new Function("rethrowJsAsJava","getGlobalName","instance",
"method",...fa,"try {\n     return instance !== null\n"+`        ? instance[method](${r})\n`+`        : getGlobalName(method)(${r});\n`+"} catch (e) {\n    rethrowJsAsJava(e);\n}")).bind(null,u,a);h.teavmJso["construct"+p]=(new Function("rethrowJsAsJava","constructor",...fa,"try {\n"+`    return new constructor(${r});\n`+"} catch (e) {\n    rethrowJsAsJava(e);\n}")).bind(null,u);h.teavmJso["arrayOf"+p]=new Function(...fa,"return ["+r+"]");fa.push("p"+(p+1))}}async function t(h){try{const n={},v=b(n,
{}),q=h.path instanceof WebAssembly.Module?h.path:await WebAssembly.compileStreaming(fetch(h.path),{builtins:["js-string"]}),x=new WebAssembly.Instance(q,n);v.O(x.exports);return{module:q,instance:x}}catch(n){return console.warn("Could not load deobfuscator",n),null}}function D(h,n,v){let q=null,x=!1;return k=>{if(!x){x=!0;if(null!==n)try{q=v.exports.createFromExternalFile.value(n)}catch(u){console.warn("Could not load create deobfuscator",u)}if(null===q&&null!==h)try{q=v.exports.createForModule.value(h)}catch(u){console.warn("Could not create deobfuscator from module data",
u)}}return null!==q?q.deobfuscate(k):[]}}async function y(h,n){if(!n.enabled||"auto"!==h&&"external"!==h)return null;if(n.J instanceof ArrayBuffer)return new Int8Array(n.J);h=await fetch(n.J);return h.ok?new Int8Array(await h.arrayBuffer()):null}function z(h){const n=new sa;h.teavm.pollAsyncCallbacks=function(){for(var v;v=n.j();)v.fn()};return function(v){n.push({fn:v,_next:null})}}let B=new Map,G=/.+:wasm-function\[[0-9]+]:0x([0-9a-f]+).*/,W=Symbol("javaException");class ea extends Error{constructor(h,
n){super();this.j=h;this[W]=n;h.exports["teavm.setJsException"](n,this)}get message(){var h=this.j.exports["teavm.exceptionMessage"];return"function"===typeof h&&(h=h(this[W]),null!=h)?h:"(could not fetch message)"}}let L=null;od={load:async function(h,n){n||={};var v=n.B||{};let [q,x,k]=await Promise.all([v.enabled?t(v):Promise.resolve(null),h instanceof WebAssembly.Module?Promise.resolve(h):WebAssembly.compileStreaming(fetch(h),{builtins:["js-string"]}),y(v.T,v)]);var u={};h={};v=b(u,h);"undefined"!==
typeof n.M&&n.M(u);v.X(z(u));n=await WebAssembly.instantiate(x,u);v.O(n.exports);q&&(u=D(null,k,q.instance),null!==u&&(v.Y(u),h.deobfuscator=u));v={exports:h,instance:n,N:{P:x,S:q?q.module:null}};for(let w in n.exports){let E=n.exports[w];E instanceof WebAssembly.Global?Object.defineProperty(h,w,{get:()=>E.value}):"function"===typeof E&&(h[w]=E)}h.memory=n.exports["teavm.memory"];h.R=k;return v},$:b,ba:function(h){return new Proxy(h,{get(n,v){return new WebAssembly.Global({value:"externref",mutable:!1},
n[v])}})}}})();async function pd(){try{Error.stackTraceLimit=1024;O=self.__eaglercraftXLoaderContext.getEaglercraftXOpts();Ta=self.__eaglercraftXLoaderContext.getEagRuntimeJSURL();const a=self.__eaglercraftXLoaderContext.getClassesWASMURL(),b=self.__eaglercraftXLoaderContext.getClassesDeobfWASMURL(),c=self.__eaglercraftXLoaderContext.getClassesTEADBGURL();Pa=self.__eaglercraftXLoaderContext.getEPKFiles();Va=self.__eaglercraftXLoaderContext.getRootElement();self.__eaglercraftXLoaderContext.getImageURL(0);Qa=self.__eaglercraftXLoaderContext.getImageURL(1);
Ra=self.__eaglercraftXLoaderContext.getImageURL(2);Sa=self.__eaglercraftXLoaderContext.getImageURL(3);const d=self.__eaglercraftXLoaderContext.getMainArgs();delete self.__eaglercraftXLoaderContext;if("_worker_process_"!==d[0]){if(!await Wb())return}else ha="worker",await jc();e("Loading EaglercraftX WASM GC binary...");const g=await od.load(a,{B:{enabled:!(!b||!c),path:b,T:"external",J:c},M:function(m){m.WASMGCBufferAllocator=ta;m.platformApplication=H;m.platformAssets=wa;m.platformAudio=ya;m.platformFilesystem=
za;m.platformInput=I;m.platformNetworking=Aa;m.platformOpenGL=J;m.platformRuntime=Da;m.platformScreenRecord=Ea;m.platformVoiceClient=Fa;m.platformWebRTC=N;m.platformWebView=Ga;m.clientPlatformSingleplayer=Ja;m.serverPlatformSingleplayer=Ka;m.teavm.notifyHeapResized=function(){lc(g.exports.memory)}}});La=g.N.P;Ma=g.N.S;Na=g.exports.R;lc(g.exports.memory);Oa=g.exports.deobfuscator;e("Calling entry point with args: {}",JSON.stringify(d));try{await WebAssembly.promising(g.exports.main.__impl)(d)}catch(m){g.exports.main.__rethrow(m)}finally{la("Main function has returned!")}}catch(a){qc(a)}}
"object"===typeof self.__eaglercraftXLoaderContext?self.__eaglercraftXLoaderContext.runMain(pd):console.error("???");}).call(this);
